var ImgObj = function(params_){		this.params = params_;	this.prefix  = 'Gbr';	this.renderTo = 'img_contain';			this.width = 200;	this.height = 150;	this.idbi='';	this.store = new storeobj({		idx:0,		/*rows: [			{name: '20121102_617187_881305435.jpg' },			{name: '20121120_10254_1621872527.jpg' }		]*/	});			this.show = function(){		//do {}while(document.getElementById(this.renderTo)); 		var me=this;				if(document.getElementById(this.renderTo)){			var cont = document.getElementById(this.renderTo);						this.store.url = "pages.php?Pg=img&tipe=getdata&idbi="+this.idbi;			this.store.afterGetData = function(rows){				cont.innerHTML = me.setContent();					me.showImage(0);			}			this.store.getdata();							}else{			setTimeout(this.prefix+'.show()',500);		}				//alert('tes');		}		this.setContent = function(){				//$width = 200;$height = 150;			var jmlgbr = '1/'+this.store.rows.length;		//$prefixgbr = 'Gbr';			var fname= '';//this.store.rows[0].nmfile;		var menu = '';		/*"<div id='".$prefixgbr."_menuv' class='menuv' 						style='position:absolute;top:5;right:5;left:auto;'				>									<ul>					<li style='width: 16px;height: 18px;padding:1;margin:1;background-color:black;'>						<a class='gbr_btdel' style='' title='Show/Hide' onclick='".$prefixgbr."_ShowHide()'></a>					</li>							</ul>				</div>";		*/		//onmousemove=\"".$prefixgbr.".menuShow()\"		//onblur=\"".$prefixgbr.".menuHide()\"		//$sImg = $fgbr == '' ? '': 		var content =			"<div id='"+this.prefix+"' style='position:relative;top:0;left:0;'  >"+						"<div id='"+this.prefix+"_menu' style='z-index: 4; position: absolute; top: 0px; "+				"background-color: rgba(0, 0, 0, 0.0980392); "+				"width: "+this.width+"; height:"+this.height+"; display: none;"+				"visibility:visible;'"+				"onmouseout=\""+this.prefix+".menuHide()\" "+			">"+				"<a id='"+this.prefix+"_star' style='cursor: pointer;color:yellow;position:absolute;top:10;left:5; "+					"background-image: url(images/tumbs/star.png);"+					"background-position: 0 0; "+	    			"background-repeat: no-repeat; "+					"width: 32px;height: 32px; display:none"+					"' title='Default' onclick=''>"+				"</a>"+								"<a id='"+this.prefix+"_jmldata' style='cursor:default;color:white;background-color:black;position:absolute;top:135;left:10;' title=''>"+					jmlgbr+				"</a>"+				"<a class='"+this.prefix+"_btprev' style='' title='Sebelumnya' onclick='"+this.prefix+".Prev()'></a>"+				"<a class='"+this.prefix+"_btnext' style='' title='Selanjutnya' onclick='"+this.prefix+".Next()'></a>"+									menu+			"</div>"+									"<div style='width:"+(this.width-4)+";height:$height;margin:auto;padding:2' onmousemove='"+this.prefix+".menuShow()' >"+			//"tes".			"<table width='100%' height='100%'><tr ><td align='center'> "+			"<img id='"+this.prefix+"_img' "+				"src='view_img.php?fname="+fname+"&sw="+(this.width-8)+"&sh="+(this.height-8)+"' "+				"alt='' style='visibility: visible;' "+							">"+			"</td></tr></table>"+			"</div>"+		"<div>";				return content;	}		this.showImage = function(idx){		var img = document.getElementById(this.prefix+'_img');		var star = document.getElementById(this.prefix+'_star');		if(this.store.rows.length > 0){								var fname = this.store.rows[idx].nmfile; //alert(this.store.rows[idx].stat);			//if (fname != ''){				star.style.display = this.store.rows[idx].stat=='1' ?'block': 'none';				img.src = 'view_img.php?fname='+fname+'&sw='+(this.width-8)+'&sh='+(this.height-8);					img.style.visibility = 'visibility';				img.title = this.store.rows[idx].ket;				document.getElementById(this.prefix+'_menu').title = this.store.rows[idx].ket;			//}else{							//}		}else{			img.style.visibility = 'hidden';			star.style.display = 'none';		}				var datake = this.store.rows.length > 0 ? (idx+1): 0;				document.getElementById(this.prefix+'_jmldata').innerHTML = datake+'/'+this.store.rows.length;				}		this.Next = function(){						if( this.store.idx+1 < this.store.rows.length ){			this.store.idx++;			this.showImage(this.store.idx);			/*var fname = this.store.rows[this.store.idx].nmfile;			img.src = 'view_img.php?fname='+fname+'&sw='+(this.width-8)+'&sh='+(this.height-8);							document.getElementById(this.prefix+'_jmldata').innerHTML = (this.store.idx+1)+'/'+this.store.rows.length;			*/		}else{			//alert('tex')		}					}			this.Prev = function(){		//var img = document.getElementById(this.prefix+'_img');		if( this.store.idx-1 >=0 ){			this.store.idx--;			this.showImage(this.store.idx);			/*var fname = this.store.rows[this.store.idx].nmfile;			img.src = 'view_img.php?fname='+fname+'&sw='+(this.width-8)+'&sh='+(this.height-8);				document.getElementById(this.prefix+'_jmldata').innerHTML = (this.store.idx+1)+'/'+this.store.rows.length;*/		}else{			//alert('pex')		}	}		this.menuShow = function(){				var menu = document.getElementById(this.prefix+'_menu');				menu.style.display = 'block';	}	this.menuHide = function(){				var menu = document.getElementById(this.prefix+'_menu');				menu.style.display = 'none' ;		//alert('blur');	}		this.initial = function(){				for (var name in this.params) {	//console.info ('name='+name);			eval( 'if(this.params.'+name+' != null) this.'+name+'= this.params.'+name+'; ');		}					};		this.initial();}var Gbr = new ImgObj({	prefix  : 'Gbr',	renderTo: 'img_contain',});/*$('#$elContain').hover(				function(){					$('#{$FormName}_menu').show();				},				function(){					if (!document.getElementById('{$FormName}_cover')){						$('#{$FormName}_menu').hide();					}else{						//alert('ada');					}				}			);var FmEntryGbrObj  = function(){	var onajxproses = false;	var contain = 'FmEntryGbr';	//var prefix='FmEntryGbr';		function this.uploadFile(){	//alert(document.getElementById('selFile').value);							if (document.getElementById(this.contain.+'_uploadedfile').value != ''){						addCoverPage('coverpage',100);				document.getElementById('".$idImgLoad."').style.visibility= 'visible';							adminForm.enctype='multipart/form-data';								document.adminForm.Act.value='".$FormName."1';							adminForm.action='#{$FormName}';				document.adminForm.submit();		}else{			alert('File belum dipilih!');		}	}			function this.showEntry(){//alert('tes');				//document.getElementById('{$FormName}_overlay').style.visibility='visible';		document.body.style.overflow='hidden';		addCoverPage('{$FormName}_cover',1);		document.getElementById('{$FormName}_ulFormEntry').style.visibility='visible';	}	function this.closeEntry(){					//document.getElementById('{$FormName}_overlay').style.visibility='hidden';		delElem('{$FormName}_cover');				document.body.style.overflow='auto';					document.getElementById('{$FormName}_ulFormEntry').style.visibility='hidden';	}	function this.showEntryKet(){					var errmsg = '';			if ( document.getElementById('".$FormName."_idgbr' ) == null ) {			errmsg='Gambar tidak ada!';		}				if(errmsg ==''){							var id = document.getElementById('".$FormName."_idgbr').value;			var ket = document.getElementById('ket'+id).innerHTML;						document.getElementById('{$FormName}_fmKET2').value = Encoder.htmlDecode(ket);			//document.getElementById('{$FormName}_overlay').style.visibility='visible';			document.body.style.overflow='hidden';			addCoverPage('{$FormName}_cover',1);			document.getElementById('{$FormName}_ulEntryKet').style.visibility='visible';					}else{			alert(errmsg);		}				}	function this.simpanEntryKet(){					addCoverPage('coverpage',100);					adminForm.action='#{$FormName}'	;		document.adminForm.Act.value='".$FormName."2';		document.adminForm.submit();	}	function this.closeEntryKet(){					//document.getElementById('{$FormName}_overlay').style.visibility='hidden';		delElem('{$FormName}_cover');				document.body.style.overflow='auto';		document.getElementById('{$FormName}_ulEntryKet').style.visibility='hidden';	}	function this.Hapus(){		if (document.getElementById('".$FormName."_idgbr') == null) {			alert('Gambar Tidak Ada!');		}else{									if(confirm('Yakin photo ini akan di hapus?')){				adminForm.action='#{$FormName}'	;			document.adminForm.Act.value='".$FormName."3';			document.adminForm.submit();		}		}	}	function {$FormName}_SetDefault(){		if(confirm('Jadikan photo sebagai Default?')){				adminForm.action='#{$FormName}'	;			document.adminForm.Act.value='".$FormName."4';			document.adminForm.submit();		}	}	function {$FormName}_Next(){			var jmldata = document.getElementById('".$FormName."_jmldata').value;		adminForm.enctype='multipart/form-data';				adminForm.action='#{$FormName}'	;		//limitaw= adminForm.LimitAw;		limitaw= document.getElementById('".$FormName."_LimitAw');//alert(limitaw.value);		limitaw.value++;				if (limitaw.value > (jmldata-1)){	limitaw.value=0;}							//adminForm.submit();	adminForm.action='';		{$FormName}_refreshList();					}	function {$FormName}_Prev(){		var jmldata = document.getElementById('".$FormName."_jmldata').value;				adminForm.enctype='multipart/form-data';		adminForm.action='#{$FormName}'	;			limitaw= document.getElementById('".$FormName."_LimitAw');			//limitaw= adminForm.LimitAw;		limitaw.value--;		if (limitaw.value < 0){	limitaw.value=jmldata-1;}					//adminForm.submit(); adminForm.action='';		{$FormName}_refreshList();		}	function {$FormName}_Zoom(){		adminForm.action='pages.php?Pg=brg&SPg=02&byId=$byId';		adminForm.target = '_blank'; 		adminForm.submit();			adminForm.target ='';			adminForm.action='';	}		function {$FormName}_refreshList(){						onajxproses = true;		id = document.getElementById('idbi').value;		AjxPost(			'pages.php?Pg=brg&SPg=02&byId='+id+'&idprs=list',			'adminForm',						function(resp){								if (resp.ErrMsg==''){					document.getElementById('cntgambar').innerHTML = resp.content;					onajxproses=false;				}else{					alert(resp.ErrMsg);				}			},			true						);	}}//FmEntryGbrObj.prototype = new ajax(); FmEntryGbr = new FmEntryGbrObj();	*/