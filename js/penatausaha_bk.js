var PenatausahaObj  = function(){	this.prefix = 'penatausaha';	this.elCurrPage= 'HalDefault';	this.elCover = this.prefix+'_Cover';		this.elJmlCek = this.prefix+'_jmlcek';	this.elJmlDataTampil = this.prefix+'_jmldatapage';	this.elCheckBox =this.prefix+'_cb';	this.elContentTotal = 'cntTotHarga';	this.elContentHal = this.prefix+'_cont_hal';	this.elContentDaftar = this.prefix+'_cont_list';	//this.url = 'pages.php?Pg=05&SPg=03';	this.formName = 'adminForm';	this.daftarPilih= new Array();	this.withKeranjang = false;	this.withPilih = true;	this.filterCbxChecked = false;		this.tampilPJRuang = function(){		//document.getElementById('pjruang').innerHTML = 'zzzz';		$.ajax({			type:'POST', 			data:$('#'+this.formName).serialize()+'&tes=1',			//data:'tes=1',			url: 'pages.php?Pg=ruang&tipe=tampilPJruang',		  	success: function(data) {						var resp = eval('(' + data + ')');					if (resp.err =='')	{							var nip = '-'; var nama= '-';					if (resp.content.nip) nip =resp.content.nip;					if (resp.content.nama) nama = resp.content.nama;					document.getElementById('pjruang').innerHTML = nip +' / '+nama;									}else{					//alert(resp.err);										//document.body.style.overflow='auto';				}		  	}		});	}		this.simpanKeranjang = function(img,idbi){				if (img.getAttribute('value') == '1'){			img.src = 'images/administrator/images/downloads_f2.png';				img.setAttribute('value', '0');			var idx=this.daftarPilih.indexOf(idbi);						this.daftarPilih.splice(idx,1);					}else{			img.src = 'images/administrator/images/downloads.png';				img.setAttribute('value', '1');			this.daftarPilih[this.daftarPilih.push()]=idbi		}				document.getElementById('jmlkeranjang').innerHTML = this.daftarPilih.length;	}			this.OnSuccess = function(){		//barcode input ---------		/*onscan = 0; 		console.info('succses'+onscan); 		if (document.getElementById('inputbarcode')) document.getElementById('inputbarcode').value='';		*/						var resp = eval('(' + this.GetResponseText() + ')'); //alert('tess');		if (resp.ErrMsg ==''){			switch (resp.daftarProses[resp.idprs]){									case 'list': 										document.getElementById(this.elContentDaftar).innerHTML = resp.content.list; 					if (document.getElementById('cntTitle')) document.getElementById('cntTitle').innerHTML = resp.content.title; 					if (document.getElementById('boxchecked')) document.getElementById('boxchecked').value='0';					if (document.getElementById('fmIDLama')) document.getElementById('fmIDLama').value='';										if(this.withKeranjang){						Keranjang.jmlContainPilih = document.getElementById('jmPerHal').value;						Keranjang.tampil();						}					//tampilkan checkbox yg dipilih					if(this.withPilih) this.cbTampil();				break;				case 'sum':										document.getElementById(this.elContentTotal).innerHTML = resp.content.sum;									break;				case 'sumhal':										document.getElementById(this.elContentTotal).innerHTML = resp.content.sum;					document.getElementById(this.elContentHal).innerHTML = resp.content.hal;										if(document.getElementById('cntTotLuas')) document.getElementById('cntTotLuas').innerHTML = '<b>'+resp.content.vluas_tanah;										//alert(resp.content.jmlData);					if (resp.content.jmlData==0) alert ('Barang Tidak Ditemukan!!');					if(document.getElementById('barcode_input')) barcode.reset();					if(document.getElementById('barcodeCariBarang_input')) barcodeCariBarang.reset();										//alert('tes');					if (document.getElementById('titleBelumSensus')) document.getElementById('titleBelumSensus').innerHTML=resp.content.vjmlData+' data';				break;											}						var cover = document.getElementById('cover');			if(cover) cover.style.display='none';			//	alert('tes');		}else{			alert(resp.ErrMsg);		}		//next ---		resp.idprs++;		if (resp.idprs < resp.daftarProses.length){				this.sendReq( {	idprs: resp.idprs,	daftarProses: resp.daftarProses } );			}							}	this.sendReq = function(opt){				var optstring = JSON.stringify( opt );		var SPg='03'; 		if(document.getElementById('GetSPg') ) SPg = document.getElementById('GetSPg').value; 		var url = 'pages.php?Pg=05&SPg='+SPg+'&opt='+optstring; //var url = 'pages/pay/ajxprs.php?opt='+optstring;		this.InitializeRequest('POST', url); 		var Params = this.form != '' ? createParamByForm(this.formName) : 'null';	//alert(Params);		this.Commit(Params);	}		this.loading= function(){		//this.sendReq( { idprs: 0, daftarProses: new Array('list','sumhal')} );			this.sendReq( { idprs: 0, daftarProses: new Array('list','sumhal')} );		}	this.refreshList = function(resetPageNo){		if (resetPageNo) document.getElementById(this.elCurrPage).value=1;					//document.getElementById(this.elContentTotal).innerHTML = '';		//var ctn = document.getElementById(this.elContentDaftar);		//ctn.innerHTML = '';		//"&nbsp;&nbsp Loading... &nbsp;&nbsp <img src='images/wait.gif' height='16' style='margin:4'>"			//+ctn.innerHTML		//	;				var cover = document.getElementById('cover');		if(cover) cover.style.display='block'; 		var hal =document.getElementById(this.elCurrPage).value;				var ctn = document.getElementById(this.elContentHal);		if(ctn){			//alert(hal);			ctn.innerHTML = "Loading...<img src='images/wait.gif' height='16' style='margin:4'>"+				"<input type='hidden' id='"+this.elCurrPage+"' value='"+hal+"'>";				this.sendReq( { idprs: 0, daftarProses: new Array('list','sumhal')} );			}				//	ctn.innerHTML;		//ctn.style.display =  "block" ;		//ctn.disabled= true;		//sleep(10);							}	this.filtering = function(){		//this.refreshList( true );	}	this.gotoHalaman = function(nothing,Hal){				document.getElementById(this.elCurrPage).value = Hal;		//document.adminForm.submit();		this.refreshList( false );	}	this.edit = function(){		/*var jmlCek = document.getElementById( this.elJmlCek ).value;		var errmsg = '';		if((errmsg=='') && ( jmlCek>1 )){	errmsg= 'Pilih Hanya Satu Data!';	}		if((errmsg=='') && ( (jmlCek == 0)||(jmlCek == '')  )){	errmsg= 'Data belum dipilih!';	}		if(errmsg ==''){ 										var jmldata= document.getElementById( this.elJmlDataTampil ).value;			for(var i=0; i < jmldata; i++){				var box = document.getElementById( this.elCheckBox + i);				if( box.checked){ 																if (confirm('Batalkan ?')){						this.sendReq( { idprs: 0, daftarProses: new Array('edit') , idplh: box.value } );						}										}			}		}else{			alert(errmsg);		}*/				}	this.cetakBrg= function(op){		/*adminForm.action='?Op='+op+'&SPg=cetak_one';		adminForm.target='_blank';		adminForm.submit();	*/	}	this.cetakHal= function(op){		/*var optstring = JSON.stringify( { idprs: 0, daftarProses: new Array('cetak_hal') } ); 		adminForm.action= this.url+'&opt='+encodeURI(optstring);		//alert(adminForm.action);		adminForm.target='_blank';		adminForm.submit();	*/	}	this.cetakAll= function(op){		//adminForm.action='?Op='+op+'&SPg=cetak_all';		/*var optstring = JSON.stringify( { idprs: 0, daftarProses: new Array('cetak_all') } ); 		adminForm.action= this.url+'&opt='+optstring;		adminForm.target='_blank';		adminForm.submit();	*/	}			this.getDaftarOpsi=function(){		$.ajax({			type:'POST', 			data:$('#'+this.formName).serialize(),			url: 'pages.php?Pg=05&idpilih=getDaftarOpsi',		  	success: function(data) {				var resp = eval('(' + data + ')');					if (resp.ErrMsg =='')	{						document.getElementById('penatausaha_cont_opt').innerHTML = resp.content;				}else{					alert(resp.ErrMsg);														}			}		});	}		this.cari = function(){ //teu dipake		sw = getBrowserWidth();		sh= getBrowserHeight();		var cover = this.prefix+'_formcovercari';			addCoverPage2(cover,31,true,false);		$.ajax({				type:'POST', 				data:$('#'+this.formName).serialize(),				url: 'pages.php?Pg=05&idpilih=formCari&sh='+sh+'&sw='+sw,			  	success: function(data) {							var resp = eval('(' + data + ')');						if (resp.err =='')	{														document.getElementById(cover).innerHTML = resp.content;												//document.getElementById('div_detailcari').innerHTML = 						//	"<div id='penatausaha_cont_list'></div>"+						//	"<div id='penatausaha_cont_hal'><input type='hidden' value='1' id=HalDefault></div>"+						//	"";												//PenatausahaCari.refreshList(true);											}else{						alert(resp.err);											document.body.style.overflow='auto';					}			  	}			});	}	this.resetPilih = function()	{			this.daftarPilih=[]; //kosongkan Array			//delete cookie			this.setCookie(this.prefix+'_DaftarPilih','') //ambil cookies				this.filterCbxChecked= false;	}	this.cbxPilih = function(th){		if(document.getElementById('formcaribi')){			if(th.checked)	{								this.daftarPilih[this.daftarPilih.push()]=th.value							}else	{				var idx=this.daftarPilih.indexOf(th.value)								this.daftarPilih.splice(idx,1)			}						this.setCookie(this.prefix+"_DaftarPilih",this.daftarPilih.join()) //setcookie					 	var jmlpilih = this.daftarPilih.length;	 //alert(jmlpilih);		 	document.getElementById(this.prefix+'_pilihan_msg').innerHTML = this.tampilPilihFilter();							 }	} 	//checkbox filter piolihan di klik	this.cbxFilterKlik = function(th){		//alert('tes');		this.filterCbxChecked = th.checked;		this.refreshList(true);	}	//tampilkan pilihan di filter	this.tampilPilihFilter = function(){		var jmlpilih = this.daftarPilih.length;	// alert(jmlpilih);		var checked = '';		if( this.filterCbxChecked ) checked = "checked='true'";				var str= 			"<div style='float:left;padding:2'>Terpilih: </div><div id='jmlpilih' style='float:left;padding:2'>"+jmlpilih.toString()+"</div>"+			"<div style='float:left'><input type='checkbox' id='cbxpilihfilter' name='cbxpilihfilter' value='1' "+checked+" onclick='Penatausaha.cbxFilterKlik(this)'></div>";		return str;	}		//untuk pilih semua		this.checkAll = function(PagePerHal,idcb,idtoggle,jmlcek) { 		//alert(1);		if(document.getElementById('formcaribi')){			//alert(2);			var toggle = document.getElementById(idtoggle)			for(var i=0;i<PagePerHal;i++){				var cb = document.getElementById('cb'+i.toString());				if(cb) //jika cb ada				{					if(toggle.checked)					{						console.log(i.toString()+ " "+cb.value)																	if(this.daftarPilih.indexOf(cb.value)<0)						{							this.daftarPilih[this.daftarPilih.push()]=cb.value						}											}					else					{						var idx=this.daftarPilih.indexOf(cb.value)										this.daftarPilih.splice(idx,1)					}									}							}						//alert(this.daftarPilih.join())			this.setCookie(this.prefix+"_DaftarPilih",this.daftarPilih.join()) //setcookie			var jmlpilih = this.daftarPilih.length;	 //alert(jmlpilih);		 	document.getElementById(this.prefix+'_pilihan_msg').innerHTML = this.tampilPilihFilter();				//'Terpilih: '+jmlpilih.toString();					}	}		this.cbTampil = function() //fungsi untuk dipanggil di daftarRender() untuk Cookie	{			if(document.getElementById('formcaribi')){			var getCook = this.getCookie(this.prefix+'_DaftarPilih') //ambil cookies						if(getCook)//jika ada nilai			{					var jmPerHal =  document.getElementById('jmPerHal').value;			    //merubah string ke array				this.daftarPilih=getCook.split(',')								//pengecekan jumlah checkbox				 for(var i=0;i<jmPerHal;i++)				{					 if(document.getElementById('cb'+i.toString()))					 {						var cbx = document.getElementById('cb'+i.toString()); //ambil value checkbox						var val = cbx.value;					   	//jika value ada di daftar						if(this.daftarPilih.indexOf(val)>=0) //pengecekan checkbox						{							cbx.checked=true;						}					 }				 }			 }			 		 		 	 //alert(jmlpilih);			// var jmlpilih = this.daftarPilih.length;		 	document.getElementById(this.prefix+'_pilihan_msg').innerHTML = this.tampilPilihFilter();							//'Terpilih: '+jmlpilih.toString();			 }		 	}		this.getCookie = function(c_name){	var i,x,y,ARRcookies=document.cookie.split(";");	for (i=0;i<ARRcookies.length;i++)	  {	  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));	  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);	  x=x.replace(/^\s+|\s+$/g,"");	  if (x==c_name)	    {	    return unescape(y);	    }	  }	}		this.setCookie = function(c_name,value){		//var exdate=new Date();		//exdate.setDate(exdate.getDate() + exdays);		//var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());		var c_value=escape(value);		document.cookie=c_name + "=" + c_value;	}			this.pilihGedungOnchange = function(){ //pilih gedung onchange		//alert('tes2');		//document.getElementById('cbxRuang').innerHTML = 'z';		var me = this;		var cover = this.name+'_pilihgedungcover';		addCoverPage2(cover,1,true,false);			$.ajax({			url: 'pages.php?Pg=ruang&tipe=pilihRuangKIR',		  	type : 'POST',		  	data:$('#adminForm').serialize(), //data:$('#adminForm').serialize(),		  	success: function(data) {						var resp = eval('(' + data + ')');							delElem(cover);				if(resp.err==''){					//me.Close();						document.getElementById('cbxRuang').innerHTML = resp.content;					me.refreshList(true);					//me.refreshList(true);							//if(document.getElementById('Sensus_cont_daftar')) me.refreshList(true);									//if(document.getElementById('penatausaha_cont_list')) Penatausaha.refreshList(true);						}else{					alert(resp.err)					}		  	}		});			}}PenatausahaObj.prototype = new ajax(); Penatausaha = new PenatausahaObj();function daftaropsi_click(heightmax){	//alert('tess');					//var heightmax = 200;//$opsi_height;					var heightmin = 64;					var icon_up='images/tumbs/up_2.png';					var icon_down = 'images/tumbs/down_2.png';					var div_id = 'daftaropsi_div';					var div_slide = 'daftaropsi_slide_img';										var div= document.getElementById(div_id);					var img = document.getElementById(div_slide);					var img_src=img.getAttribute('src');					//if( img_src =='images/tumbs/down.png' ){					if( img_src == icon_down ){						img.setAttribute('src', icon_up);						div.style.height=heightmax;					}else{						img.setAttribute('src', icon_down);						div.style.height=heightmin;					}				}var PenatausahaCariObj  = function(){	this.prefix = 'penatausaha';	this.elCurrPage= 'HalDefault';	this.elCover = this.prefix+'_Cover';		this.elJmlCek = this.prefix+'_jmlcek';	this.elJmlDataTampil = this.prefix+'_jmldatapage';	this.elCheckBox =this.prefix+'_cb';	this.elContentTotal = 'cntTotHarga';	this.elContentHal = this.prefix+'_cont_hal';	this.elContentDaftar = this.prefix+'_cont_list';	//this.url = 'pages.php?Pg=05&SPg=03';	this.formName = 'UsulanHapus_formcari';			this.OnSuccess = function(){		//barcode input ---------		/*onscan = 0; 		console.info('succses'+onscan); 		if (document.getElementById('inputbarcode')) document.getElementById('inputbarcode').value='';		*/						var resp = eval('(' + this.GetResponseText() + ')'); //alert('tess');		if (resp.ErrMsg ==''){			switch (resp.daftarProses[resp.idprs]){									case 'list': 										document.getElementById(this.elContentDaftar).innerHTML = resp.content.list; 					if(document.getElementById('cntTitle'))document.getElementById('cntTitle').innerHTML = resp.content.title; 					if(document.getElementById('boxchecked'))document.getElementById('boxchecked').value='0';					if(document.getElementById('fmIDLama'))document.getElementById('fmIDLama').value='';									break;				case 'sum':										document.getElementById(this.elContentTotal).innerHTML = resp.content.sum;									break;				case 'sumhal':										document.getElementById(this.elContentTotal).innerHTML = resp.content.sum;					document.getElementById(this.elContentHal).innerHTML = resp.content.hal;					//alert(resp.content.jmlData);					if (resp.content.jmlData==0) alert ('Barang Tidak Ditemukan!!');					//barcode.reset();				break;											}			//var cover = document.getElementById('cover');			//cover.style.display='none';			//	alert('tes');		}else{			alert(resp.ErrMsg);		}		//next ---		resp.idprs++;		if (resp.idprs < resp.daftarProses.length){						this.sendReq( {	idprs: resp.idprs,	daftarProses: resp.daftarProses } );			}							}	this.sendReq = function(opt){	//alert("tes2"+opt.idprs)				var optstring = JSON.stringify( opt ); 		var SPg = '03';//document.getElementById('GetSPg').value; 		var url = 'pages.php?Pg=05cari&SPg='+SPg+'&opt='+optstring; //var url = 'pages/pay/ajxprs.php?opt='+optstring;		this.InitializeRequest('POST', url); 		var Params = this.form != '' ? createParamByForm(this.formName) : 'null';	//alert(Params);		this.Commit(Params);	}		this.loading= function(){		//this.sendReq( { idprs: 0, daftarProses: new Array('list','sumhal')} );			this.sendReq( { idprs: 0, daftarProses: new Array('list','sumhal')} );		}	this.refreshList = function(resetPageNo){		//if (resetPageNo) document.getElementById(this.elCurrPage).value=1;			//alert("tes")				//var cover = document.getElementById('cover');		//cover.style.display='block';		var hal =document.getElementById('HalDefault').value;//alert(hal)		var ctn = document.getElementById(this.elContentHal);		ctn.innerHTML = "Loading...<img src='images/wait.gif' height='16' style='margin:4'>"+			"<input type='hidden' id='"+this.elCurrPage+"' value='"+hal+"'>";						this.sendReq( { idprs: 0, daftarProses: new Array('list','sumhal')} );				}	this.filtering = function(){		//this.refreshList( true );	}	this.gotoHalaman = function(nothing,Hal){				document.getElementById(this.elCurrPage).value = Hal;		//document.adminForm.submit();		this.refreshList( false );	}	this.edit = function(){		/*var jmlCek = document.getElementById( this.elJmlCek ).value;		var errmsg = '';		if((errmsg=='') && ( jmlCek>1 )){	errmsg= 'Pilih Hanya Satu Data!';	}		if((errmsg=='') && ( (jmlCek == 0)||(jmlCek == '')  )){	errmsg= 'Data belum dipilih!';	}		if(errmsg ==''){ 										var jmldata= document.getElementById( this.elJmlDataTampil ).value;			for(var i=0; i < jmldata; i++){				var box = document.getElementById( this.elCheckBox + i);				if( box.checked){ 																if (confirm('Batalkan ?')){						this.sendReq( { idprs: 0, daftarProses: new Array('edit') , idplh: box.value } );						}										}			}		}else{			alert(errmsg);		}*/				}	this.cetakBrg= function(op){		/*adminForm.action='?Op='+op+'&SPg=cetak_one';		adminForm.target='_blank';		adminForm.submit();	*/	}	this.cetakHal= function(op){		/*var optstring = JSON.stringify( { idprs: 0, daftarProses: new Array('cetak_hal') } ); 		adminForm.action= this.url+'&opt='+encodeURI(optstring);		//alert(adminForm.action);		adminForm.target='_blank';		adminForm.submit();	*/	}	this.cetakAll= function(op){		//adminForm.action='?Op='+op+'&SPg=cetak_all';		/*var optstring = JSON.stringify( { idprs: 0, daftarProses: new Array('cetak_all') } ); 		adminForm.action= this.url+'&opt='+optstring;		adminForm.target='_blank';		adminForm.submit();	*/	}	/*this.showAsetLain =function(){		document.getElementById('fmKONDBRG').value = 3;			adminForm.action='?Pg=05&SPg=03';				adminForm.target='';		adminForm.submit();	}*/	}PenatausahaCariObj.prototype = new ajax(); PenatausahaCari = new PenatausahaCariObj();/*barcodeCariBarangExec = function(){	//alert(document.getElementById('barcodeCariBarang_input').value);	if(document.getElementById('barcodeCariBarang_input')){					var e = document.getElementById('barcodeCariBarang_input');		var str = e.value;		if (str.length>=28){			//trigger input barcode to filter //alert(str);			//me.onscan = 1; 			//e.readOnly = true;	//console.info('request'+this.onscan);			//this.kode = str;			//this.setInputReady();	//console.info('cek '+ me.onscan+' name:'+me.name);			Penatausaha.refreshList(true);		}	}}setInterval(function(){			eval('barcodeCariBarangExec()')			},			1000);*/	