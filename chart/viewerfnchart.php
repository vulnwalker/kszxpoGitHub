<?phpglobal $tmpdir;global $datawarna;$datawarna=array('#85eD82',            '#F7b7b7',            '#CFDF49',            '#88d8f2',            '#07AF7B',            '#B9E3F9',            '#FFF3AD',            '#EF606A',            '#EC8833',            '#FFF100',            '#87C9A5',			            '#CFE7FB',            '#F9D76F',            '#B9D566',            '#FFBB90',            '#66BBBB',            '#E69090',            '#BB90BB',            '#9AB67C',            '#D1CC66',            '#AFD8F8',            '#F6BD0F',            '#8BBA00',            '#FF8E46',            '#008E8E',            '#D64646',            '#8E468E',            '#588526',            '#B3AA00',            '#008ED6',            '#9D080D',            '#A186BE',            '#183152',            '#C4D7ED',            '#375D81',            '#ABC8E2',            '#E1E6FA',            '#9BBAB2',            '#3B4259',            '#0063BC',            '#1D5A73',            '#ABABFF',            '#27ADC5',            '#EDFFCC',            '#66FFFF',            '#00AABB',            '#00FFCC',            '#33CCFF',            '#008866',            '#99FFFF',            '#0099FF',            '#99FFCC',            '#3399FF',            '#2277FF',            '#445588',            '#003388',            '#338877',            '#55DDFF',            '#00FF99',            '#BBBBBB',            '#77AAFF',            '#00FFCC');$kolomdata1=array();$kolomdata2=array();$kolomdata3=array();$kolomdatap1=array();$kolomdatap2=array();$kolomlabel1=array();$kolomlabel2=array();$kolomlabel3=array();$kolomlabelno=array();$kolomtitle1=array();$kolomtitle2=array();$kolomtitle3=array();function WilSKPD1x() { 	//global $DisAbled;	global $fmWIL,$fmSKPD,$fmUNIT,$fmSUBUNIT,$fmTAHUNANGGARAN,$fmKEPEMILIKAN,$Main,$HTTP_COOKIE_VARS,$Pg,$SPg; 		$disSKPD = $DisAbled; $disUNIT = $DisAbled; $disSUBUNIT = $DisAbled;	 	$KondisiSKPD = ""; $KondisiUNIT = ""; $KondisiSUBUNIT = ""; 	$PilihSKPD = "<option value='00'>--- Semua Bidang ---</option>"; 	$PilihUNIT = "<option value='00'>--- Semua Unit Bidang ---</option>"; 	$PilihSUBUNIT = "<option value='00'>--- Semua Sub Unit ---</option>"; 	if($HTTP_COOKIE_VARS["coSKPD"] !== "00") { 		$fmSKPD = $HTTP_COOKIE_VARS["coSKPD"]; 		$HTTP_COOKIE_VARS["cofmSKPD"]=$fmSKPD; 		$KondisiSKPD = " and c='$fmSKPD'"; $PilihSKPD = "";		//echo "<br>KondisiSKPD=".$KondisiSKPD ;	} 	if($HTTP_COOKIE_VARS["coUNIT"] !== "00") { 		$fmUNIT = $HTTP_COOKIE_VARS["coUNIT"]; 		$HTTP_COOKIE_VARS["cofmUNIT"]=$fmUNIT; 		$KondisiUNIT = " and d='$fmUNIT'"; $PilihUNIT = ""; 		//echo "<br>KondisiUNIT=".$KondisiUNIT ;	} 	if($HTTP_COOKIE_VARS["coSUBUNIT"] !== "00") { 		$fmSUBUNIT = $HTTP_COOKIE_VARS["coSUBUNIT"]; 		$HTTP_COOKIE_VARS["cofmSUBUNIT"]=$fmSUBUNIT; 		$KondisiSUBUNIT = " and e='$fmSUBUNIT'"; 		$PilihSUBUNIT = ""; 	} 		$Qry = mysql_query("select * from ref_wilayah where b<>'00' order by nm_wilayah"); 	$Ops = ""; 	while($isi=mysql_fetch_array($Qry)) { 		$sel = $fmWIL == $isi['b'] ? "selected":""; 		$Ops .= "<option $sel value='{$isi['b']}'>{$isi['nm_wilayah']}</option>\n"; 	} 	$ListKab = "<select name='fmWIL'  onChange=\"adminForm.target='_self';adminForm.action='?Pg=$Pg&SPg=$SPg';adminForm.submit()\"><option value=''>--- Pilih Kabupaten/Kota ---</option>$Ops</select>"; 		//$cekskpd = 'kon='.$KondisiSKPD;	$Qry = mysql_query("select * from ref_skpd where d='00' $KondisiSKPD order by c"); 	$Ops = ""; 	while($isi=mysql_fetch_array($Qry)) { 		$sel = $fmSKPD == $isi['c'] ? "selected":""; 		$Ops .= "<option $sel value='{$isi['c']}'>{$isi['nm_skpd']}</option>\n"; 	} 	$ListSKPD = $cekskpd."<select $disSKPD name='fmSKPD' onChange=\"adminForm.target='_self';adminForm.action='?Pg=$Pg&SPg=$SPg'; adminForm.fmUNIT.value='00';adminForm.fmSUBUNIT.value='00';adminForm.submit()\">$PilihSKPD $Ops</select>"; 		$Qry = mysql_query("select * from ref_skpd where c='$fmSKPD' and d <> '00' and e = '00' $KondisiUNIT order by d"); 	$Ops = ""; 	while($isi=mysql_fetch_array($Qry)) { 		$sel = $fmUNIT == $isi['d'] ? "selected":""; 		$Ops .= "<option $sel value='{$isi['d']}'>{$isi['nm_skpd']}</option>\n"; 	} 	$ListUNIT = "<select $disUNIT name='fmUNIT' onChange=\"adminForm.target='_self';adminForm.action='?Pg=$Pg&SPg=$SPg'; adminForm.fmSUBUNIT.value='00';adminForm.submit()\">$PilihUNIT $Ops</select>"; 		$Qry = mysql_query("select * from ref_skpd where c='$fmSKPD' and d = '$fmUNIT' and e <> '00' $KondisiSUBUNIT order by e"); 	$Ops = ""; 	while($isi=mysql_fetch_array($Qry)) { 		$sel = $fmSUBUNIT == $isi['e'] ? "selected":""; 		$Ops .= "<option $sel value='{$isi['e']}'>{$isi['nm_skpd']}</option>\n"; 	} 	$ListSUBUNIT = "<select $disSUBUNIT name='fmSUBUNIT' onChange=\"adminForm.target='_self';adminForm.action='?Pg=$Pg&SPg=$SPg'; adminForm.submit()\">	$PilihSUBUNIT $Ops</select>"; 		$Hsl= " <!-- <table width=\"100%\"  class=\"adminform\"> <tr> <td> -->					<div style='float: left; width: 100%; height: 70px; padding: 4px;'>			<table width=\"100%\"   > 				<tr valign=\"top\"> <td width='100'>BIDANG</td>   <td width='10'>:</td>   <td>$ListSKPD</td> </tr> 								<tr valign=\"top\">   <td>ASISTEN / OPD</td> <td>:</td> <td>$ListUNIT</td> </tr> 				<tr valign=\"top\">   <td>BIRO / UPTD/B</td> <td>:</td> <td>$ListSUBUNIT</td> </tr> 			</table> 			</div>									"; 			return $Hsl; } function GetColorList() {        return array(            '#85eD82',            '#F7b7b7',            '#CFDF49',            '#88d8f2',            '#07AF7B',            '#B9E3F9',            '#FFF3AD',            '#EF606A',            '#EC8833',            '#FFF100',            '#87C9A5',			            '#CFE7FB',            '#F9D76F',            '#B9D566',            '#FFBB90',            '#66BBBB',            '#E69090',            '#BB90BB',            '#9AB67C',            '#D1CC66',            '#AFD8F8',            '#F6BD0F',            '#8BBA00',            '#FF8E46',            '#008E8E',            '#D64646',            '#8E468E',            '#588526',            '#B3AA00',            '#008ED6',            '#9D080D',            '#A186BE',            '#183152',            '#C4D7ED',            '#375D81',            '#ABC8E2',            '#E1E6FA',            '#9BBAB2',            '#3B4259',            '#0063BC',            '#1D5A73',            '#ABABFF',            '#27ADC5',            '#EDFFCC',            '#66FFFF',            '#00AABB',            '#00FFCC',            '#33CCFF',            '#008866',            '#99FFFF',            '#0099FF',            '#99FFCC',            '#3399FF',            '#2277FF',            '#445588',            '#003388',            '#338877',            '#55DDFF',            '#00FF99',            '#BBBBBB',            '#77AAFF',            '#00FFCC',        );    }function GetNamaOPD() { 	global $fmWIL,$fmSKPD,$fmUNIT,$fmSUBUNIT,$fmKEPEMILIKAN,$fmWIL;	global $KEPEMILIKAN,$WILAYAH,$SKPD,$UNIT,$SUBUNIT;  	$KEPEMILIKAN = mysql_fetch_array(mysql_query("select nm_pemilik from ref_pemilik where a1='$fmKEPEMILIKAN'"));	$KEPEMILIKAN = $KEPEMILIKAN[0]; 	/*$WILAYAH = mysql_fetch_array(mysql_query("select nm_wilayah from ref_wilayah where b='$fmWIL' "));	$WILAYAH = $WILAYAH[0]; */	$WILAYAH = '-';	$SKPD = mysql_fetch_array(mysql_query("select nm_skpd from ref_skpd where d='00' and c='$fmSKPD' "));	$SKPD = $SKPD[0]; 	$UNIT = mysql_fetch_array(mysql_query("select nm_skpd from ref_skpd  where  c='$fmSKPD' and d <> '00' and e = '00' and d='$fmUNIT' "));	$UNIT = $UNIT[0]; 	$SUBUNIT = mysql_fetch_array(mysql_query("select nm_skpd from ref_skpd  where  c='$fmSKPD' and d = '$fmUNIT' and e <> '00' and e='$fmSUBUNIT' "));	$SUBUNIT = $SUBUNIT[0]; }function GetNamaBarang() { 	global $fmBIDANG,$fmKELOMPOK,$fmSUBKELOMPOK,$fmSUBSUBKELOMPOK;	global $BIDANG_BARANG,$KELOMPOK_BARANG,$SUBKELOMPOK_BARANG,$SUBSUBKELOMPOK_BARANG,$BIDANG_BARANGKIB;  	$BIDANG_BARANG = mysql_fetch_array(mysql_query("select nm_barang from ref_barang where g='00' and f='$fmBIDANG' "));	$BIDANG_BARANG = $BIDANG_BARANG[0];	$KELOMPOK_BARANG = mysql_fetch_array(mysql_query("select nm_barang from ref_barang where f='$fmBIDANG' g<>'00' and g='$fmKELOMPOK' and h='00' "));	$KELOMPOK_BARANG = $KELOMPOK_BARANG[0];	$SUBKELOMPOK_BARANG = mysql_fetch_array(mysql_query("select nm_barang from ref_barang where f='$fmBIDANG' and g='$fmKELOMPOK' and h<>'00' and h='$fmSUBKELOMPOK' "));	$SUBKELOMPOK_BARANG = $SUBKELOMPOK_BARANG[0];	$SUBSUBKELOMPOK_BARANG = mysql_fetch_array(mysql_query("select nm_barang from ref_barang where f='$fmBIDANG' and g='$fmKELOMPOK' and h='$fmSUBKELOMPOK' and i<>'00' i='$fmSUBSUBKELOMPOK'"));	$SUBSUBKELOMPOK_BARANG = $SUBSUBKELOMPOK_BARANG[0];	$BIDANG_BARANGKIB='';	if ($fmBIDANG=='01') $BIDANG_BARANGKIB ='KIB A';	if ($fmBIDANG=='02') $BIDANG_BARANGKIB ='KIB B';	if ($fmBIDANG=='03') $BIDANG_BARANGKIB ='KIB C';	if ($fmBIDANG=='04') $BIDANG_BARANGKIB ='KIB D';	if ($fmBIDANG=='05') $BIDANG_BARANGKIB ='KIB E';	if ($fmBIDANG=='06') $BIDANG_BARANGKIB ='KIB F';	 }function gentmpfile($dir='',$extf=''){do {  $filename = rand();//  $filename .= str_replace('.', '_', microtime());  $filename .= getmypid();  $filename .= '.'.$extf;} while(file_exists($dir.$filename));return $filename;	}function separator1000($aVal) {    return number_format($aVal,0,',','.');}function getdaftar1($modedata=0){global $kolomtitle1,$kolomtitle2,$kolomtitle3;global $kolomdata1,$kolomdata2,$kolomdata3,$kolomdata4,$kolomdatap1,$kolomdatap2;		global $ada_data,$JmlTotData,$jmlTotHarga,$jmlTotBarang;global $fmWIL,$fmSKPD,$fmUNIT,$fmSUBUNIT,$fmKEPEMILIKAN,$fmWIL,$fmBIDANG;global $KEPEMILIKAN,$WILAYAH,$SKPD,$UNIT,$SUBUNIT,$fmJChart;global $fmthnawal,$fmthnakhir;  		global $datawarna,$COrder;$clGaris='GarisCetak';$isi='';if ($ada_data==1){	$tmpfmSKPD=$fmSKPD;$TitleJml='Perolehan';switch ($COrder){case '00':{ $TitleJml='Nilai Asset<br>(dalam ribuan)';$TitleJml1='(%)';$TitleCol='Bidang';break;	}case '01':{ $TitleJml='Jumlah Asset';$TitleJml1='(%)';$TitleCol='Bidang';break;}case '02':{ $TitleJml='Nilai Asset<br>(dalam ribuan)';$TitleJml1='(%)';$TitleCol='KIB';break;	}case '03':{ $TitleJml='Jumlah Asset';$TitleJml1='(%)';$TitleCol='KIB';break;		}case '04':{ $TitleJml='Nilai Aset';$TitleCol='Bidang Barang';break;		}case '05':{ $TitleJml='Jumlah Aset';$TitleCol='Bidang Barang';break;		}			case '06':{ $TitleJml='Nilai Asset<br>(dalam ribuan)';$TitleJml1='(%)';$TitleCol='Nama Kota / Kabupaten';break;	}case '07':{ $TitleJml='Jumlah Asset';$TitleJml1='(%)';$TitleCol='Nama Kota / Kabupaten';break;}case '08':{ $TitleJml='Nilai Asset<br>(dalam ribuan)';$TitleJml1='(%)';$TitleCol='Bidang / OPD / UPTD';break;	}case '09':{ $TitleJml='Jumlah Asset';$TitleJml1='(%)';$TitleCol='Bidang / OPD / UPTD';break;}case '10':{ $TitleJml='Nilai Asset<br>(dalam ribuan)';$TitleJml1='(%)';$TitleCol='Bidang / OPD / UPTD';break;	}case '11':{ $TitleJml='Jumlah Asset';$TitleJml1='(%)';$TitleCol='Bidang / OPD / UPTD';break;}			} $SUBJUDUL='';if ($COrder=='00' || $COrder=='01' || $COrder=='02' || $COrder=='03' || $COrder=='06' || $COrder=='07'|| $COrder=='08' || $COrder=='09' || $COrder=='10' || $COrder=='11'){	$isi='<table  border="1" cellpadding="0" cellspacing="0" style="background-color:white;width: 18cm;" class="cetak"><tr  style="background-color:#E6E6E6; font-size:11; color:black;"><THEAD>				<th class="th01" style="color:black;" width="40">No.</th>				<th class="th01" style="color:black;border-right: hidden;" width="20">&nbsp;</th>				<th class="th01" style="color:black;border-left: hidden;" >'.$TitleCol.'</th>  			    <th class="th01" style="color:black;" width="150">'.$TitleJml.'</th>		  			    <th class="th01" style="color:black;" width="100">'.$TitleJml1.'</th>				</tr></THEAD><TBODY>';$jmldata = count($kolomtitle1);$jmlwarna = count($datawarna);$tkodec='-';$tkoded='-';$tkodee='-';$tkodecde='00.00.00';$spadding='padding-left:14';$no_tbl=1;for ($i=1;$i<=$jmldata;$i++){if ($COrder=='00' || $COrder=='02' || $COrder=='06' || $COrder=='08' || $COrder=='10') {$jdata=$kolomdata1[$i-1]*100/$jmlTotHarga;$jdata1=$kolomdata1[$i-1]/1000;$jdata2=$jmlTotHarga/1000;	}if ($COrder=='01' || $COrder=='03' || $COrder=='07' || $COrder=='09' || $COrder=='11'){$jdata=$kolomdata2[$i-1]*100/$jmlTotBarang;$jdata1=$kolomdata2[$i-1];$jdata2=$jmlTotBarang;		} $xdata=$kolomdata2[$i-1];$nowarna =($i-1)%$jmlwarna;if ($COrder=='00' || $COrder=='01' || $COrder=='08' || $COrder=='09' || $COrder=='10' || $COrder=='11'){	$kodecde=$kolomtitle3[$i-1];$kodec=substr($kodecde,0,2);$koded=substr($kodecde,3,2);$kodee=substr($kodecde,6,2);if ($kodec!='00' && $koded!='00'){    $spadding='padding-left:24';	if ($kodec!=$tkodec)	{	$fmSKPD=$kodec;	$fmUNIT='00';	$fmSUBUNIT='00';	GetNamaOPD();	$isi .='	<tr class "row0" >	<td class="'.$clGaris.'" align=right>&nbsp;</td>	<td class="'.$clGaris.'" align=right>&nbsp;</td>		<td class="'.$clGaris.'" align=left style="padding-left:10"><b>'.$SKPD.'</b></td>		<td class="'.$clGaris.'" align=right>&nbsp;</td>	<td class="'.$clGaris.'" align=right>&nbsp;</td>				</tr>';		$tkodec=$kodec;	$tkoded='';			}}if ($koded!='00' && $kodee!='00'){    $spadding='padding-left:44';	if ($koded!=$tkoded)	{	$fmSKPD=$kodec;	$fmUNIT=$koded;	$fmSUBUNIT='00';	GetNamaOPD();		$isi .='	<tr class "row0" >	<td class="'.$clGaris.'" align=right>&nbsp;</td>	<td class="'.$clGaris.'" align=right>&nbsp;</td>		<td class="'.$clGaris.'" align=left style="padding-left:30"><b>'.$UNIT.'</b></td>		<td class="'.$clGaris.'" align=right>&nbsp;</td>	<td class="'.$clGaris.'" align=right>&nbsp;</td>				</tr>';		$tkoded=$koded;		}}}$isix ='<tr class "row0" >';if (($COrder=='06' || $COrder=='07')) {	$isix .='<td class="'.$clGaris.'" align=right style="padding-right:10"><!--no_table-->.</td>';} else{$isix .='<td class="'.$clGaris.'" align=right style="padding-right:10">'.$i.'.</td>';	}$isix .='<td class="'.$clGaris.'" align=right><div style="background-color:'.$datawarna[$nowarna].'">&nbsp;</div></td>	<td class="'.$clGaris.'" align=left style="'.$spadding.'">'. $kolomtitle1[$i-1].'</td>';if ($COrder=='00' || $COrder=='02' || $COrder=='06' || $COrder=='08' || $COrder=='10'){$isix.='<td class="'.$clGaris.'" align=right style="padding-right:10">&nbsp;'. number_format($jdata1,2,',','.') .'</td>';}else{$isix.='<td class="'.$clGaris.'" align=right style="padding-right:10">&nbsp;'. number_format($jdata1,0,',','.') .'</td>';	}	$isix.='<td class="'.$clGaris.'" align=right style="padding-right:10">&nbsp;'. number_format($jdata,2,',','.') .'</td></tr>';if ($xdata==0 and ($COrder=='06' || $COrder=='07')){$isix='';		}if ($xdata<>0 and ($COrder=='06' || $COrder=='07')){$isix=str_replace('<!--no_table-->',$no_tbl,$isix);$no_tbl++;		}$isi.=$isix;}$isi .='<tr class "row0" ><td class="'.$clGaris.'" align=right style="padding-right:10">&nbsp;</td><td class="'.$clGaris.'" align=right>&nbsp;</td>	<td class="'.$clGaris.'" align=right ><b>Total</b> </td>';if ($COrder=='00' || $COrder=='02' || $COrder=='06' || $COrder=='08' || $COrder=='10' ){$isi.='<td class="'.$clGaris.'" align=right style="padding-right:10"><b>'. number_format($jdata2,2,',','.') .'</b></td><td class="'.$clGaris.'" align=right style="padding-right:10">&nbsp;</td></tr>';	}else{$isi.='<td class="'.$clGaris.'" align=right style="padding-right:10"><b>'. number_format($jdata2,0,',','.') .'</b></td><td class="'.$clGaris.'" align=right >&nbsp;</td></tr>';	}	$isi .='</TBODY></table><br></div>';				 }if ($COrder=='04' || $COrder=='05'){if ($fmJChart=='02'){$isi='<div align="center"><div align="center" style="font-size:14;color:black;"><b>'.$SUBJUDUL.'</b> </div><br><table  border="1" cellpadding="0" cellspacing="0" style="background-color:white;width: 10cm;" class="cetak"><THEAD><tr  style="background-color:#E6E6E6; font-size:11; color:black;">				<th class="th01"  style="color:black;" width="40">No.</th>  			    <th class="th01"  style="color:black;" width="70">Tahun</th>  			    <th class="th01"  style="color:black;" width="100">'.$TitleJml.'</th></tr></THEAD><TBODY>';		} else {	$isi='<div align="center"><div align="center" style="font-size:14;color:black;"><b>'.$SUBJUDUL.'</b> </div><br><table  border="1" cellpadding="0" cellspacing="0" style="background-color:white;width: 18cm;" class="cetak"><THEAD><tr  style="background-color:#E6E6E6; font-size:11; color:black;">				<th class="th01" rowspan=2 style="color:black;" width="40">No.</th>  			    <th class="th01" rowspan=2 style="color:black;" width="70">Tahun</th>  			    <th class="th01" colspan=3 style="color:black;" width="70">'.$TitleJml.'</th></tr>				<tr  style="background-color:#E6E6E6; font-size:11; color:black;">				  			    <th class="th01" style="color:black;" width="100">Bertambah</th>  			    <th class="th01" style="color:black;" width="100">Berkurang</th>  			    <th class="th01" style="color:black;" width="100">Total</th>				</tr></THEAD><TBODY>';	}$jmldata = count($kolomtitle1);for ($i=1;$i<=$jmldata;$i++){if ($COrder=='05'){if ($fmJChart=='02'){if ($i>1){$x=$i-1;$isi .='<tr class "row0" ><td class="'.$clGaris.'" align=right style="padding-right:10">'.$x.'.</td><td class="'.$clGaris.'" align=center style="padding-right:10">'. $kolomtitle1[$i-1].'</td><td class="'.$clGaris.'" align=right style="padding-right:10">'. number_format($kolomdata3[$i-1],0,',','.') .'</td>	</tr>';	}	} else {	$isi .='<tr class "row0" ><td class="'.$clGaris.'" align=right style="padding-right:10">'.$i.'.</td><td class="'.$clGaris.'" align=center style="padding-right:10">'. $kolomtitle1[$i-1].'</td><td class="'.$clGaris.'" align=right style="padding-right:10">'. number_format($kolomdata1[$i-1],0,',','.') .'</td><td class="'.$clGaris.'" align=right style="padding-right:10">'. number_format($kolomdata2[$i-1],0,',','.') .'</td><td class="'.$clGaris.'" align=right style="padding-right:10">'. number_format($kolomdata3[$i-1],0,',','.') .'</td>	</tr>';	}	} else {if ($fmJChart=='02'){if ($i>1){$x=$i-1;$isi .='<tr class "row0" ><td class="'.$clGaris.'" align=right style="padding-right:10">'.$x.'.</td><td class="'.$clGaris.'" align=center style="padding-right:10">'. $kolomtitle1[$i-1] .'</td><td class="'.$clGaris.'" align=right style="padding-right:10">'. number_format($kolomdata3[$i-1],2,',','.') .'</td>	</tr>';	}} else {$isi .='<tr class "row0" ><td class="'.$clGaris.'" align=right style="padding-right:10">'.$i.'.</td><td class="'.$clGaris.'" align=center style="padding-right:10">'. $kolomtitle1[$i-1] .'</td><td class="'.$clGaris.'" align=right style="padding-right:10">'. number_format($kolomdata1[$i-1],2,',','.') .'</td><td class="'.$clGaris.'" align=right style="padding-right:10">'. number_format($kolomdata2[$i-1],2,',','.') .'</td><td class="'.$clGaris.'" align=right style="padding-right:10">'. number_format($kolomdata3[$i-1],2,',','.') .'</td>	</tr>';	}	}}$isi .='</TBODY></table></div>';}$fmSKPD=$tmpfmSKPD;}return $isi;}function getoptthn($modedata=0,$thnawal=0,$thnakhir=0){	$Hsl='';	$Qry = mysql_query("select min(year(tgl_buku)) as tahun from buku_induk where year(tgl_buku)>=2009");	while($isi=mysql_fetch_array($Qry))	{		$mintahun=$isi['tahun'];		$imintahun=(int)$mintahun;	}	$Qry = mysql_query("select max(year(tgl_buku)) as tahun from buku_induk where year(tgl_buku)>=2009");	while($isi=mysql_fetch_array($Qry))	{		$maxtahun=$isi['tahun'];		$imaxtahun=(int)$maxtahun;	}	$cnt=$imaxtahun-$imintahun;	if ($thnawal>$thnakhir) $thnakhir=$thnawal;	$Ops='';	$Opsa='';	if ($cnt>0)	{	for ($i==0;$i<$cnt;$i++)	{		$cbtahun=$imintahun+$i;		$Ops .='<option  '.((int)$thnawal==$cbtahun?"selected":"").' value="'.$cbtahun.'">'.$cbtahun.'</option>';		$Opsa .='<option  '.((int)$thnakhir==$cbtahun?"selected":"").' value="'.$cbtahun.'">'.$cbtahun.'</option>';			}	}	$Listthnawal= 		"<select ".$fmthnawal." name='fmthnawal' >".$Ops.		"</select>";			$Listthnakhir= 		"<select ".$fmthnakhir." name='fmthnakhir' >".$Opsa.		"</select>";	if ($modedata=='1')	{	$Hsl =$Listthnawal."&nbsp;&nbsp;   s/d &nbsp;&nbsp;".$Listthnakhir;	} else {	$Hsl =$Listthnawal;			}    return $Hsl;	}function getOptchart1( $doCari, $addPageParam  ){global $fmWIL,$fmSKPD,$fmUNIT,$fmSUBUNIT;global $fmBIDANG;global $COrder,$deftahun,$fmthnawal,$fmthnakhir,$fmJChart;global $doCari;if ($COrder=='') $COrder='00';if ($fmBIDANG=='') $fmBIDANG="00";if ($fmSKPD=='') $fmSKPD="00";if ($fmUNIT=='') $fmUNIT="00";if ($fmSUBUNIT=='') $fmSUBUNIT="00";if ($deftahun=='') $deftahun=date("Y");if ($fmthnawal=='') $fmthnawal=$deftahun;if ($fmthnakhir=='') $fmthnakhir=$deftahun;$disUNIT = ""; $disSUBUNIT = ""; $KondisiSKPD = ""; $KondisiUNIT = ""; $KondisiSUBUNIT = ""; $PilihSKPD = "<option value='00'>--- Semua SKPD ---</option>"; $PilihUNIT = "<option value='00'>--- Semua UNIT ---</option>"; $PilihSUBUNIT = "<option value='00'>--- Semua SUB UNIT ---</option>"; if ($fmSKPD=='00') {$fmUNIT='00';$fmSUBUNIT='00';} if ($fmUNIT=='00') {$fmSUBUNIT='00';} // if ($fmSUBUNIT=='00') {$KondisiSUBUNIT = " and e='$fmSUBUNIT'";}$Ops='';if ($fmSKPD=='00'){$Ops='		<option  '.($COrder=="00"?"selected":"").' value="00">NILAI ASET BERDASARKAN BIDANG</option>		<option '.($COrder=="01"?"selected":"").' value="01">JUMLAH ASET BERDASARKAN BIDANG</option>';	}if ($fmUNIT=='00'){$Ops.='		<option  '.($COrder=="08"?"selected":"").' value="08">NILAI ASET BERDASARKAN OPD</option>		<option '.($COrder=="09"?"selected":"").' value="09">JUMLAH ASET BERDASARKAN OPD</option>';	}if ($fmSUBUNIT=='00'){$Ops.='		<option  '.($COrder=="10"?"selected":"").' value="10">NILAI ASET BERDASARKAN UPTD</option>		<option '.($COrder=="11"?"selected":"").' value="11">JUMLAH ASET BERDASARKAN UPTD</option>';	}$Ops.='		<option  '.($COrder=="02"?"selected":"").' value="02">NILAI ASET BERDASARKAN KIB</option>		<option '.($COrder=="03"?"selected":"").' value="03">JUMLAH ASET BERDASARKAN KIB</option>		<option '.($COrder=="04"?"selected":"").' value="04">NILAI ASET BERDASARKAN TAHUN</option>		<option '.($COrder=="05"?"selected":"").' value="05">JUMLAH ASET BERDASARKAN TAHUN</option>		<option '.($COrder=="06"?"selected":"").' value="06">NILAI ASET BERDASARKAN KOTA/KABUPATEN</option>		<option '.($COrder=="07"?"selected":"").' value="07">JUMLAH ASET BERDASARKAN KOTA/KABUPATEN</option>'	;$ListChart="<select ".$COrder." name='COrder' onChange=\"adminForm.target='_self';adminForm.action='?Pg=Chart';adminForm.doCari.value=-1;adminForm.submit();\">".$Ops.		"</select>";if ($COrder=='06' || $COrder=='07' ){// if ($fmBIDANG='00') $fmBIDANG='01';$Ops='	<option '.($fmBIDANG=="01"?"selected":"").' value="01">KIB A TANAH</option>		<option '.($fmBIDANG=="03"?"selected":"").' value="03">KIB C GEDUNG DAN BANGUNAN</option>		<option '.($fmBIDANG=="04"?"selected":"").' value="04">KIB D JALAN, IRIGASI DAN JARINGAN</option>		<option '.($fmBIDANG=="06"?"selected":"").' value="06">KIB F KONTRUKSI DALAM PENGERJAAN</option>		';	} else {			$Ops='<option  '.($fmBIDANG=="00"?"selected":"").' value="00">--- Semua KIB ---</option>		<option '.($fmBIDANG=="01"?"selected":"").' value="01">KIB A TANAH</option>		<option '.($fmBIDANG=="02"?"selected":"").' value="02">KIB B PERALATAN DAN MESIN</option>		<option '.($fmBIDANG=="03"?"selected":"").' value="03">KIB C GEDUNG DAN BANGUNAN</option>		<option '.($fmBIDANG=="04"?"selected":"").' value="04">KIB D JALAN, IRIGASI DAN JARINGAN</option>		<option '.($fmBIDANG=="05"?"selected":"").' value="05">KIB E ASET TETAP LAINNYA</option>		<option '.($fmBIDANG=="06"?"selected":"").' value="06">KIB F KONTRUKSI DALAM PENGERJAAN</option>		';}$ListKIB= 		"<select ".$fmBIDANG." name='fmBIDANG' >".$Ops.		"</select>";		if ($COrder=='04' || $COrder=='05' ){$modedata=1;	} else {$modedata=0;	}$Hsl=  "		<input type='hidden' name='doCari' id='doCari' value=''>		<table width=\"100%\" height=\"100%\"  > ";		$Hsl .="	<tr align=\"left\" valign=\"middle\">	<td align=\"left\" height=\"22\" width=\"100\">JENIS CHART</td>	<td align=\"left\" width=\"10\">:</td>	<td align=\"right\">$ListChart</td>	</tr>";	$Hsl .="	<tr align=\"left\" valign=\"middle\">	<td align=\"left\" height=\"22\" width=\"100\">TAHUN ANGGARAN</td>	<td align=\"left\" width=\"10\">:</td>	<td align=\"right\">".getoptthn($modedata,$fmthnawal,$fmthnakhir)."</td>	</tr>";	if ($COrder=='00' || $COrder=='01' || $COrder=='04' || $COrder=='05' || $COrder=='06' || $COrder=='07' || $COrder=='08' || $COrder=='09' || $COrder=='10' || $COrder=='11' ) {	$Hsl .=" 	<tr align=\"left\" valign=\"middle\">	<td align=\"left\" height=\"22\" width=\"100\">KIB</td>	<td align=\"left\" width=\"10\">:</td>	<td align=\"right\">$ListKIB</td>	</tr> ";		}if ( $COrder=='04' || $COrder=='05') {	$ListChart1="<select ".$fmJChart." name='fmJChart' style='width:134px;'>".	'<option '.($fmJChart=="01"?"selected":"").' value="01">BAR</option>	<option '.($fmJChart=="02"?"selected":"").' value="02">LINE</option>'.	"</select>";	$Hsl .=" 	<tr align=\"left\" valign=\"middle\">	<td align=\"left\" height=\"22\" width=\"100\">JENIS CHART</td>	<td align=\"left\" width=\"10\">:</td>	<td align=\"right\">$ListChart1</td>	</tr> ";			}	$Hsl .="</table>";		return $Hsl;	}function getdatachart1() // Data Rekapitulasi Harga Perolehan & Jumlah Barang {global $Main,$fmKEPEMILIKAN, $fmSKPD, $fmUNIT, $fmSUBUNIT;global $SKPD,$UNIT,$SUBUNIT;global $fmBIDANG,$fmKELOMPOK,$fmSUBKELOMPOK,$fmSUBSUBKELOMPOK;global $BIDANG_BARANG,$KELOMPOK_BARANG,$SUBKELOMPOK_BARANG,$SUBSUBKELOMPOK_BARANG,$BIDANG_BARANGKIB;global $KEPEMILIKAN,$WILAYAH,$SKPD,$UNIT,$SUBUNIT; global $kolomdata1,$kolomdata2,$kolomdata3,$kolomdatap1,$kolomdatap2;	global $kolomlabel1,$kolomlabel2,$kolomlabelno;		global $kolomtitle1,$kolomtitle2,$kolomtitle3;		global $ada_data,$JmlTotData,$jmlTotHarga,$jmlTotBarang;		global $cari, $Main, $Pg, $SPg,$COrder,$graph,$doCari;global $fmthnawal,$charttitle;// $charttitle='';if (empty($fmBIDANG)) $fmBIDANG='00';	if (empty($fmSKPD)) $fmSKPD='00';if (empty($fmUNIT)) $fmUNIT='00';if (empty($fmSUBUNIT)) $fmSUBUNIT='00';GetNamaOPD();GetNamaBarang();$titleskpd='';if (!empty($SKPD)) $titleskpd='<br>'.$SKPD;if (!empty($UNIT)) $titleskpd.=' - '.$UNIT;if (!empty($SUBUNIT)) $titleskpd.=' - '.$SUBUNIT;$titlebarang='';if ($fmBIDANG!='00') $titlebarang="<br>$BIDANG_BARANGKIB - $BIDANG_BARANG";$Kondisi = " a1='11' ";$KondisiTglA= " and  year(tgl_buku)<='$fmthnawal' ";$KondisiTglB= " and  year(tgl_penghapusan)<='$fmthnawal' ";if ($fmSKPD=='00') {   $KondisiRef = " c!='00' and d='00' and e='00' ";   if ($COrder=='08' || $COrder=='09'){   $KondisiRef = " c!='00' and d!='00' and e='00' ";   }   if ($COrder=='10' || $COrder=='11'){   $KondisiRef = " c!='00' and d!='00' and e!='00' ";   }} else {	$KondisiRef = " c='$fmSKPD'";	$Kondisi .= " and c='$fmSKPD'";	if ($fmUNIT=='00'){		$KondisiRef .= " and d!='00' and e='00' ";	} else {		$KondisiRef .= " and d='$fmUNIT' ";		$Kondisi .= " and d='$fmUNIT'";		if ($fmSUBUNIT=='00'){			$KondisiRef .= " and e!='00' ";		} else {			$KondisiRef .= " and e='$fmSUBUNIT' ";			$Kondisi .= " and e='$fmSUBUNIT'";					}	}}switch ($COrder) {	case '00':{		$charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Nilai Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan Bidang $titleskpd $titlebarang</b></div>";		break;	}	case '01':{		$charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Jumlah Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan Bidang $titleskpd $titlebarang</b></div>";		break;	}	case '08':{		$charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Nilai Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan OPD $titleskpd $titlebarang</b></div>";		break;	}	case '09':{		$charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Jumlah Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan OPD $titleskpd $titlebarang</b></div>";		break;	}	case '10':{		$charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Nilai Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan UPTD $titleskpd $titlebarang</b></div>";		break;	}	case '11':{		$charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Jumlah Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan UPTD $titleskpd $titlebarang</b></div>";		break;	}}if ($COrder=='00' || $COrder=='01' || $COrder=='08' || $COrder=='09' || $COrder=='10' || $COrder=='11') {	if ($COrder=='00'){ $charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Nilai Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan Bidang $titleskpd $titlebarang</b></div>";}if ($COrder=='01'){ $charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Jumlah Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan Bidang $titleskpd $titlebarang</b></div>";}$sqry = "select * from ref_skpd where $KondisiRef order by c,d,e";$qry = mysql_query($sqry);$jmlData= mysql_num_rows($qry);$JmlTotData =$jmlData;$cb=0;$jmlTotHarga=0;$jmlTotBarang = 0;	while($data=mysql_fetch_array($qry)){		array_push($kolomtitle3, $data['c'].".".$data['d'].".".$data['e']);		array_push($kolomtitle1, $data['nm_skpd']);		$cb++;		array_push($kolomlabelno, $cb.'.');//		$ceksql='';				$Kondisi = 'a1="11" ';		$Kondisi .= ($fmBIDANG=='00'?'':' and f="'.$fmBIDANG.'"');		$Kondisi .= ($data['c']=='00'?'':' and c="'.$data['c'].'"');		$Kondisi .= ($data['d']=='00'?'':' and d="'.$data['d'].'"');		$Kondisi .= ($data['e']=='00'?'':' and e="'.$data['e'].'"');		$KondisiB =$Kondisi;		$Kondisi .= ' and (status_barang=1 or status_barang=3) ';		$SelectKondisi = "sum(jml_barang) as tot_barang,sum(jml_harga) as tot_harga";		$SelectKondisiB = "sum(jml_barang) as tot_barang,sum(harga) as tot_harga";		$GroupKondisi="";				$jmltharga=0;		$jmltbarang=0;				// Buku Inventaris	 	$s1qry = " select $SelectKondisi from buku_induk where $Kondisi $KondisiTglA ";  	 	$qryx = mysql_query($s1qry);		while($datax=mysql_fetch_array($qryx)){			$jmltharga=$datax['tot_harga'];			$jmltbarang=$datax['tot_barang'];		}		// Penghapusan		$jmlkharga=0;		$jmlkbarang=0;//		$ceksql .= ' -- '.$s1qry;			 	$s1qry = " select $SelectKondisiB from v_hapus_bi where $KondisiB $KondisiTglB ";  	 	$qryx = mysql_query($s1qry);		while($datax=mysql_fetch_array($qryx)){			$jmlkharga=$datax['tot_harga'];			$jmlkbarang=$datax['tot_barang'];		}			$jmlsharga=$jmltharga-$jmlkharga;			$jmlsbarang=$jmltbarang-$jmlkbarang;//		$ceksql .= ' xx '.$s1qry;//		if (empty($jmltharga) ) $jmltharga=0;//		if (empty($jmltbarang) ) $jmltbarang=0;//		$jmltharga=1000000;		array_push($kolomdata1, $jmlsharga);		array_push($kolomdata2, $jmlsbarang);//		array_push($kolomdatap2, $ceksql.' -> '.$jmltbarang.' -- '.$jmlkbarang);		$jmlTotHarga=$jmlTotHarga+$jmlsharga;		$jmlTotBarang = $jmlTotBarang+$jmlsbarang;		if ($COrder=="00" || $COrder=="08" || $COrder=="10"){		if ($jmlsharga>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					} else {		if ($jmlsbarang>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					}		//		$cari->cek .=$data['nm_skpd'].' = '.$jmltharga.' '.$s1qry.' - '.$cc.'<br>';			}	 $ada_data=0; if ($COrder=='00' && 	$jmlTotHarga>0) $ada_data=1; if ($COrder=='08' && 	$jmlTotHarga>0) $ada_data=1; if ($COrder=='10' && 	$jmlTotHarga>0) $ada_data=1;  if ($COrder=='01' && 	$jmlTotBarang>0) $ada_data=1; if ($COrder=='09' && 	$jmlTotBarang>0) $ada_data=1; if ($COrder=='11' && 	$jmlTotBarang>0) $ada_data=1;} if ($COrder=='02' || $COrder=='03'){  if ($COrder=='02'){ $charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Nilai Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan KIB $titleskpd $titlebarang</b></div>";}if ($COrder=='03'){ $charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Jumlah Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan KIB $titleskpd $titlebarang</b></div>";} $Kondisi =" a1='11' ";   if ($fmSKPD!='00') { 	$Kondisi .= " and c=".$fmSKPD; } if ($fmUNIT!='00') { 	$Kondisi .= " and d=".$fmUNIT; }if ($fmSUBUNIT!='00') { 	$Kondisi .= " and e=".$fmSUBUNIT; }$sqry = "select * from ref_barang where g='00' order by f";$qry = mysql_query($sqry);$jmlData= mysql_num_rows($qry);$JmlTotData =$jmlData;$cb=0;$jmlTotHarga=0;$jmlTotBarang = 0;	while($data=mysql_fetch_array($qry)){		array_push($kolomtitle3, $data['f'].".00.00");		array_push($kolomtitle1,$Main->KIB[$data['f']][1].' - '.$data['nm_barang']);		$cb++;		array_push($kolomlabelno, $cb.'.');					$jmltharga=0;		$jmltbarang=0;		$s1qry="select sum(jml_barang) as tot_barang,sum(jml_harga) as tot_harga from buku_induk".		" where ".$Kondisi." ".$KondisiTglA." and f=".$data['f']." and (status_barang=1 or status_barang=3)";  	 	$qryx = mysql_query($s1qry);		while($datax=mysql_fetch_array($qryx)){			$jmltharga=$datax['tot_harga'];			$jmltbarang=$datax['tot_barang'];		}				$s1qry="select sum(jml_barang) as tot_barang,sum(harga) as tot_harga from v_hapus_bi ".		" where ".$Kondisi." ".$KondisiTglB." and f=".$data['f'];  	 	$qryx = mysql_query($s1qry);		$jmlkharga=0;		$jmlkbarang=0;		while($datax=mysql_fetch_array($qryx))		{			$jmlkharga=$datax['tot_harga'];			$jmlkbarang=$datax['tot_barang'];					}							$jmlsharga=$jmltharga-$jmlkharga;			$jmlsbarang=$jmltbarang-$jmlkbarang;		//		if (empty($jmltharga) ) $jmltharga=0;//		if (empty($jmltbarang) ) $jmltbarang=0;//		$jmltharga=1000000;		array_push($kolomdata1, $jmlsharga);		array_push($kolomdata2, $jmlsbarang);		$jmlTotHarga=$jmlTotHarga+$jmlsharga;		$jmlTotBarang = $jmlTotBarang+$jmlsbarang;		if ($COrder=="02"){		if ($jmlsharga>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					} else {		if ($jmlsbarang>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					}		//		$cari->cek .=$data['nm_skpd'].' = '.$jmltharga.' '.$s1qry.' - '.$cc.'<br>';			}	 $ada_data=0; if ($COrder=='02' && 	$jmlTotHarga>0) $ada_data=1; if ($COrder=='03' && 	$jmlTotBarang>0) $ada_data=1;}}function getdatachart3(){global $fmKEPEMILIKAN, $fmSKPD, $fmUNIT, $fmSUBUNIT;global $SKPD,$UNIT,$SUBUNIT;global $fmBIDANG,$fmKELOMPOK,$fmSUBKELOMPOK,$fmSUBSUBKELOMPOK;global $BIDANG_BARANG,$KELOMPOK_BARANG,$SUBKELOMPOK_BARANG,$SUBSUBKELOMPOK_BARANG,$BIDANG_BARANGKIB;  global $kolomdata1,$kolomdata2,$kolomdata3,$kolomdata4,$kolomdata5,$kolomdata6,$kolomdata7,$kolomdata8,$kolomdatap1,$kolomdatap2;	global $kolomlabel1,$kolomlabel2,$kolomlabelno;		global $kolomtitle1,$kolomtitle2,$kolomtitle3;		global $ada_data,$JmlTotData,$jmlTotHarga,$jmlTotBarang;		global $cari, $Main, $Pg, $SPg,$COrder,$graph,$doCari,$fmthnawal,$fmthnakhir,$fmJChart;global $charttitle;if ($fmBIDANG=='') $fmBIDANG='00';if ($fmKELOMPOK=='') $fmKELOMPOK='00';if ($fmSUBKELOMPOK=='') $fmSUBKELOMPOK='00';if ($fmSUBSUBKELOMPOK=='') $fmSUBSUBKELOMPOK='00';if ($fmSKPD=='') $fmSKPD='00';if ($fmUNIT=='') $fmUNIT='00';if ($fmSUBUNIT=='') $fmSUBUNIT='00';$charttitle='';GetNamaOPD();GetNamaBarang();$titleskpd='';if (!empty($SKPD)) $titleskpd='<br>'.$SKPD;if (!empty($UNIT)) $titleskpd.=' - '.$UNIT;if (!empty($SUBUNIT)) $titleskpd.=' - '.$SUBUNIT;$titlebarang='';if ($fmBIDANG!='00') $titlebarang="<br>$BIDANG_BARANGKIB - $BIDANG_BARANG";if ($fmthnawal!=$fmthnakhir){ $titletahun=$fmthnawal.' s/d '.$fmthnakhir ; } else {$titletahun=$fmthnawal;}if ($COrder=='04'){ $charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Nilai Aset $Main->NM_WILAYAH <br>Tahun $titletahun Berdasarkan Tahun $titleskpd $titlebarang</b></div>";}if ($COrder=='05'){ $charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Jumlah Aset $Main->NM_WILAYAH <br>Tahun $titletahun Berdasarkan Tahun $titleskpd $titlebarang</b></div>";}$kolomdata1=array();$kolomdata2=array();$kolomdata3=array();$kolomdata4=array();$kolomdata5=array();$kolomdata6=array();$kolomdata7=array();$kolomdata8=array();$ada_data=1;$jmlasset=0;$Kondisi=" a1='11' ";if ($fmBIDANG!='00') $Kondisi.=" and f='".$fmBIDANG."'";if ($fmKELOMPOK!='00') $Kondisi.=" and g='".$fmKELOMPOK."'";if ($fmSUBKELOMPOK!='00') $Kondisi.=" and h='".$fmSUBKELOMPOK."'";if ($fmSUBSUBKELOMPOK!='00') $Kondisi.=" and i='".$fmSUBSUBKELOMPOK."'";if ($fmSKPD!='00') $Kondisi.=" and c='".$fmSKPD."'";if ($fmUNIT!='00') $Kondisi.=" and d='".$fmUNIT."'";if ($fmSUBUNIT!='00') $Kondisi.=" and e='".$fmSUBUNIT."'";$JmlTambahSaldo=0;$JmlKurangSaldo=0;$JmlSaldo=0;$ithnawal=(int)$fmthnawal;$ithnakhir=(int)$fmthnakhir;if ($fmJChart=='02'){array_push($kolomtitle1,0);array_push($kolomdata1,0);		array_push($kolomdata2,0);		array_push($kolomdata3,0);		array_push($kolomdata4,0);array_push($kolomdata5,0);	array_push($kolomdata6,0);	array_push($kolomdata7,0);	array_push($kolomdata7,0);		}for ($i=$ithnawal;$i<=$ithnakhir;$i++){$JmlTambahSaldo=0;$JmlKurangSaldo=0;$JmlSaldo=0;// $ceksql='';array_push($kolomtitle1,$i);/*if ($i==$ithnawal){*//*$sqry = "select sum(jml_harga) as tot_harga,sum(jml_barang) as tot_barang from buku_induk ".		"where year(tgl_buku)<'".$i."' and ".$Kondisi." and (status_barang=1 or status_barang=3)";		$qry = mysql_query($sqry);while($data=mysql_fetch_array($qry)){if ($COrder=='05'){	$JmlTambahSaldo=$data['tot_barang'];} else {	$JmlTambahSaldo=$data['tot_harga']/1000000;}}	$ceksql = $sqry.' tambah saldo = '.$JmlTambahSaldo;$sqry = "select sum(harga) as tot_harga,sum(jml_barang) as tot_barang from v_hapus_bi ".		"where  tahun_hapus<'".$i."' and ".$Kondisi;				$qry = mysql_query($sqry);while($data=mysql_fetch_array($qry)){if ($COrder=='05'){$JmlKurangSaldo=$data['tot_barang'];	} else {$JmlKurangSaldo=$data['tot_harga']/1000000;	}}$ceksql .= ' xxx '.$sqry.' hapus saldo ='.$JmlKurangSaldo;	$JmlSaldo=$JmlTambahSaldo-$JmlKurangSaldo;*/$JmlTambah=0;$sqry = "select sum(jml_harga) as tot_harga,sum(jml_barang) as tot_barang from buku_induk ".		"where (status_barang=1 or status_barang=3)".		" and year(tgl_buku)=".$i." and ".$Kondisi;// $ceksql .= ' xxx '.$sqry;				$qry = mysql_query($sqry);while($data=mysql_fetch_array($qry)){if ($COrder=='05'){$JmlTambah=$data['tot_barang'];	} else {$JmlTambah=$data['tot_harga'];	}}$JmlPelihara=0;$sqry = "select sum(biaya_pemeliharaan) as tot_harga, count(id) as tot_barang from v_pemelihara ".		"where  year(tgl_pemeliharaan)=".$i." and ".$Kondisi;		$qry = mysql_query($sqry);while($data=mysql_fetch_array($qry)){if ($COrder=='05'){$JmlPelihara=0;	} else {$JmlPelihara=$data['tot_harga'];	}}		$JmlPengamanan=0;$sqry = "select sum(biaya_pengamanan) as tot_harga, count(id) as tot_barang from v_pengaman ".		"where  year(tgl_pengamanan)=".$i." and ".$Kondisi;		$qry = mysql_query($sqry);while($data=mysql_fetch_array($qry)){if ($COrder=='05'){$JmlPengamanan=0;	} else {$JmlPengamanan=$data['tot_harga'];	}}	$JmlTambah=$JmlTambah+$JmlPelihara+$JmlPengamanan;array_push($kolomdata1,$JmlTambah);	array_push($kolomdata5,floor($JmlTambah/1000));		$JmlKurang=0;$sqry = "select sum(harga) as tot_harga,sum(jml_barang) as tot_barang from v_hapus_bi ".		"where  tahun_hapus=".$i." and ".$Kondisi;// $ceksql .= ' xxx '.$sqry;				$qry = mysql_query($sqry);while($data=mysql_fetch_array($qry)){if ($COrder=='05'){$JmlKurang=$data['tot_barang'];	} else {$JmlKurang=$data['tot_harga'];	}}		array_push($kolomdata2,$JmlKurang);array_push($kolomdata6,floor($JmlKurang/1000));$JmlSaldo=0;$sqry = "select sum(jml_harga) as tot_harga,sum(jml_barang) as tot_barang from buku_induk ".		"where (status_barang=1 or status_barang=3)".		" and year(tgl_buku)<=".$i." and ".$Kondisi;			$qry = mysql_query($sqry);while($data=mysql_fetch_array($qry)){if ($COrder=='05'){$JmlSaldo=$data['tot_barang'];	} else {$JmlSaldo=$data['tot_harga'];	}}		// $ceksql .= ' xxx '.$sqry.' ----- saldo : '.$JmlSaldo;	$JmlKurang=0;$sqry = "select sum(harga) as tot_harga,sum(jml_barang) as tot_barang from v_hapus_bi ".		"where  tahun_hapus<=".$i." and ".$Kondisi;		$qry = mysql_query($sqry);while($data=mysql_fetch_array($qry)){if ($COrder=='05'){$JmlKurang=$data['tot_barang'];	} else {$JmlKurang=$data['tot_harga'];	}}$JmlPelihara=0;$sqry = "select sum(biaya_pemeliharaan) as tot_harga, count(id) as tot_barang from v_pemelihara ".		"where  year(tgl_pemeliharaan)<=".$i." and ".$Kondisi;		$qry = mysql_query($sqry);while($data=mysql_fetch_array($qry)){if ($COrder=='05'){$JmlPelihara=0;	} else {$JmlPelihara=$data['tot_harga'];	}}		$JmlPengamanan=0;$sqry = "select sum(biaya_pengamanan) as tot_harga, count(id) as tot_barang from v_pengaman ".		"where  year(tgl_pengamanan)<=".$i." and ".$Kondisi;		$qry = mysql_query($sqry);while($data=mysql_fetch_array($qry)){if ($COrder=='05'){$JmlPengamanan=0;	} else {$JmlPengamanan=$data['tot_harga'];	}}	$JmlSaldo=$JmlSaldo+$JmlPelihara+$JmlPengamanan;// $ceksql .= ' xxx '.$sqry.' ----- kurang : '.$JmlKurang;		// array_push($kolomdatap2,$ceksql);	array_push($kolomdata4,$JmlSaldo);array_push($kolomdata8,floor($JmlSaldo/1000));		$xJmlSaldo=$JmlSaldo-$JmlKurang;array_push($kolomdata3,$xJmlSaldo);	array_push($kolomdata7,floor($xJmlSaldo/1000));// $cari->cek .=$xJmlSaldo.' '.$i.' - '.$ithnawal.' - '.$fmthnawal.' - '.$JmlKurang.' '.$sqry .'<br>' ;$JmlSaldo=$xJmlSaldo;		}}function getdatachart2(){global $fmKEPEMILIKAN, $fmSKPD, $fmUNIT, $fmSUBUNIT;global $SKPD,$UNIT,$SUBUNIT;global $fmBIDANG,$fmKELOMPOK,$fmSUBKELOMPOK,$fmSUBSUBKELOMPOK;global $BIDANG_BARANG,$KELOMPOK_BARANG,$SUBKELOMPOK_BARANG,$SUBSUBKELOMPOK_BARANG;  global $kolomdata1,$kolomdata2,$kolomdata3,$kolomdatap1,$kolomdatap2;	global $kolomlabel1,$kolomlabel2,$kolomlabelno;		global $kolomtitle1,$kolomtitle2,$kolomtitle3;		global $ada_data,$JmlTotData,$jmlTotHarga,$jmlTotBarang;		global $cari, $Main, $Pg, $SPg,$COrder,$graph,$doCari;if (empty($fmBIDANG)) $fmBIDANG='00';	if (empty($fmSKPD)) $fmSKPD='00';if ($fmSKPD=='00') {	$Kondisi = ' c!="00" and d="00" and e="00" '; } elseif ($fmSKPD=='01') {	$Kondisi = ' d!="00" and e="00" '; } else if ($fmSKPD=='02') {	$Kondisi = ' d!="00" and e!="00" '; } $sqry="select sum(jml_barang) as jml_barang,sum(jml_harga) as jml_harga from buku_induk  ".($fmBIDANG=='00'?"where a1='11' ":"where a1='11' and f='$fmBIDANG'")." group by a1 order by a1";$QryBarang = mysql_fetch_array(mysql_query($sqry));$jmlTotBarang = $QryBarang['jml_barang'];$jmlTotHarga = $QryBarang['jml_harga'];// $cari->cek .=$sqry.' jml total harga:'.$jmlTotHarga;$GroupKondisi=" b.a1 ";if ($fmSKPD=='00') {	$Kondisi = ($fmBIDANG=='00'?" b.a1='11' ":" b.a1='11' and b.f='$fmBIDANG'"); 	$Kondisi .= ' and a.c!="00" and a.d="00" and a.e="00" ';	$GroupKondisi=",b.c ";	$OnKondisi=" a.c=b.c ";	} elseif ($fmSKPD=='01') {	$Kondisi = ($fmBIDANG=='00'?" b.a1='11' ":" b.a1='11' and b.f='$fmBIDANG'"); 	$Kondisi .= ' and a.c!="00" and a.d!="00" and a.e="00" ';	$GroupKondisi=",b.c,b.d ";} else if ($fmSKPD=='02') {	$Kondisi = ($fmBIDANG=='00'?" b.a1='11' ":" b.a1='11' and b.f='$fmBIDANG'"); 	$Kondisi .= ' and a.c!="00" and a.d!="00" and a.e!="00" ';	$GroupKondisi=",b.c,b.d,b.e ";	} if ($jmlTotHarga>0) {$ada_data=1;} else {$ada_data=0;}if ($ada_data==1){$sqry = "select * from ref_skpd where $Kondisi order by c,d,e";$sqry = "select a.c,a.d,a.e,a.nm_skpd,sum(b.harga) as tot_harga,sum(b.jml_barang) as tot_barang from ref_skpd aleft join view_buku_induk5 bON a.c=b.c and a.d=b.d and a.e=b.ewhere a.d!='00' and a.e!='00'group by b.c,b.d,b.e";$qry = mysql_query($sqry);$jmlData= mysql_num_rows($qry);$JmlTotData =$jmlData;$cb=0;$jmlTotHarga=0;$jmlTotBarang = 0;	while($data=mysql_fetch_array($qry)){		array_push($kolomtitle3, $data['c'].".".$data['d'].".".$data['e']);		array_push($kolomtitle1, $data['nm_skpd']);		$cb++;		array_push($kolomlabelno, $cb.'.');						$Kondisi = 'a1="11"';		$Kondisi .= ($fmBIDANG=='00'?'':' and f="'.$fmBIDANG.'"');		$Kondisi .= ($data['c']=='00'?'':' and c="'.$data['c'].'"');		$Kondisi .= ($data['d']=='00'?'':' and d="'.$data['d'].'"');		$Kondisi .= ($data['e']=='00'?'':' and e="'.$data['e'].'"');		$SelectKondisi = "a1,sum(jml_barang) as tot_barang,sum(jml_harga) as tot_harga";		$GroupKondisi="a1";				$jmltharga=0;		$jmltbarang=0;	 	$s1qry = " select $SelectKondisi from buku_induk where $Kondisi ".		" group by $GroupKondisi ";  	 	$qryx = mysql_query($s1qry);		$cc=0;		while($datax=mysql_fetch_array($qryx)){			if ($cc==0) {			$jmltharga=$jmltharga+$datax['tot_harga'];			$jmltbarang=$jmltbarang+$datax['tot_barang'];			}			$cc++;		}//		if (empty($jmltharga) ) $jmltharga=0;//		if (empty($jmltbarang) ) $jmltbarang=0;//		$jmltharga=1000000;		array_push($kolomdata1, $jmltharga);		array_push($kolomdata2, $jmltbarang);		$jmlTotHarga=$jmlTotHarga+$jmltharga;		$jmlTotBarang = $jmlTotBarang+$jmltbarang;		if ($COrder=="Perolehan"){		if ($jmltharga>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					} else {		if ($jmltbarang>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					}		//		$cari->cek .=$data['nm_skpd'].' = '.$jmltharga.' '.$s1qry.' - '.$cc.'<br>';			}	 }	}function getdatachart4() // Data Rekapitulasi Harga Perolehan & Jumlah Barang {global $fmKEPEMILIKAN, $fmSKPD, $fmUNIT, $fmSUBUNIT;global $SKPD,$UNIT,$SUBUNIT;global $fmBIDANG,$fmKELOMPOK,$fmSUBKELOMPOK,$fmSUBSUBKELOMPOK;global $BIDANG_BARANG,$KELOMPOK_BARANG,$SUBKELOMPOK_BARANG,$SUBSUBKELOMPOK_BARANG,$BIDANG_BARANGKIB;global $KEPEMILIKAN,$WILAYAH,$SKPD,$UNIT,$SUBUNIT; global $kolomdata1,$kolomdata2,$kolomdata3,$kolomdatap1,$kolomdatap2;	global $kolomlabel1,$kolomlabel2,$kolomlabelno;		global $kolomtitle1,$kolomtitle2,$kolomtitle3;		global $ada_data,$JmlTotData,$jmlTotHarga,$jmlTotBarang;		global $cari, $Main, $Pg, $SPg,$COrder,$graph,$doCari;global $fmthnawal,$charttitle;$charttitle='';if (empty($fmBIDANG)) $fmBIDANG='00';	if (empty($fmSKPD)) $fmSKPD='00';if (empty($fmUNIT)) $fmUNIT='00';if (empty($fmSUBUNIT)) $fmSUBUNIT='00';GetNamaOPD();GetNamaBarang();$titleskpd='';if (!empty($SKPD)) $titleskpd='<br>'.$SKPD;if (!empty($UNIT)) $titleskpd.=' - '.$UNIT;if (!empty($SUBUNIT)) $titleskpd.=' - '.$SUBUNIT;$titlebarang='';if ($fmBIDANG!='00') $titlebarang="<br>$BIDANG_BARANGKIB - $BIDANG_BARANG";$Kondisi = " a1='11' and year(tgl_buku)>'2009' and year(tgl_buku)<='$fmthnawal' ";if ($fmSKPD=='00') {   $KondisiRef = " c!='00' and d='00' and e='00' ";} else {	$KondisiRef = " c='$fmSKPD'";	$Kondisi .= " and c='$fmSKPD'";	if ($fmUNIT=='00'){		$KondisiRef .= " and d!='00' and e='00' ";	} else {		$KondisiRef .= " and d='$fmUNIT' ";		$Kondisi .= " and d='$fmUNIT'";		if ($fmSUBUNIT=='00'){			$KondisiRef .= " and e!='00' ";		} else {			$KondisiRef .= " and e='$fmSUBUNIT' ";			$Kondisi .= " and e='$fmSUBUNIT'";					}	}}if ($COrder=='06' || $COrder=='07'){	if ($COrder=='06'){ $charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Nilai Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan Kota/Kabupaten $titleskpd $titlebarang</b></div>";}if ($COrder=='07'){ $charttitle="<div style='width:100%;background-color:white;font-size:14px; '><b>Jumlah Aset $Main->NM_WILAYAH <br>Tahun $fmthnawal Berdasarkan Kota/Kabupaten $titleskpd $titlebarang</b></div>";}$sqry="select sum(jml_barang) as jml_barang,sum(jml_harga) as jml_harga from buku_induk  ".($fmBIDANG=='00'?"where $Kondisi and (status_barang=1 or status_barang=3) ":"where $Kondisi and (status_barang=1 or status_barang=3) and f='$fmBIDANG'")." group by a1 order by a1";$QryBarang = mysql_fetch_array(mysql_query($sqry));$jmlTotBarang = $QryBarang['jml_barang'];$jmlTotHarga = $QryBarang['jml_harga'];// $cari->cek .=$sqry.' jml total harga:'.$jmlTotHarga;if ($jmlTotHarga>0) {$ada_data=1;} else {$ada_data=0;}if ($ada_data==1){ $sqry = "select * from ref_wilayah where a='10' and b<>'00' order by nm_wilayah ";$qry = mysql_query($sqry);$jmlData= mysql_num_rows($qry);$JmlTotData =$jmlData;$cb=0;$jmlTotHarga=0;$jmlTotBarang = 0;	while($data=mysql_fetch_array($qry)){//		array_push($kolomtitle3, $data['c'].".".$data['d'].".".$data['e']);		array_push($kolomtitle1, $data['nm_wilayah']);		$cb++;		array_push($kolomlabelno, $cb.'.');						$Kondisi = 'a1="11"  and (status_barang=1 or status_barang=3) and year(tgl_buku)<="'.$fmthnawal.'"';		$Kondisi .= ($fmBIDANG=='00'?'':' and f="'.$fmBIDANG.'"');		$Kondisix=$Kondisi;		$Kondisi .= ($data['a']==''?'':' and alamat_a="'.$data['a'].'"');		$Kondisi .= ($data['b']==''?'':' and alamat_b="'.$data['b'].'"');		$Kondisi1 = 'a1="11"  and  year(tgl_penghapusan)<="'.$fmthnawal.'"';		$Kondisi1 .= ($fmBIDANG=='00'?'':' and f="'.$fmBIDANG.'"');		$Kondisix1=$Kondisi1;		$Kondisi1 .= ($data['a']==''?'':' and alamat_a="'.$data['a'].'"');		$Kondisi1 .= ($data['b']==''?'':' and alamat_b="'.$data['b'].'"');				$SelectKondisi = "sum(jml_barang) as tot_barang,sum(jml_harga) as tot_harga";		$SelectKondisi1 = "sum(jml_barang) as tot_barang,sum(harga) as tot_harga";		//		$GroupKondisi="a1";				$jmltharga=0;		$jmltbarang=0;		if ($fmBIDANG=='01'){	 	$s1qry = " select $SelectKondisi from view_kib_a where $Kondisi ";	 	$s2qry = " select $SelectKondisi1 from v_hapus_kiba where $Kondisi1 ";	 	$s3qry = " select $SelectKondisi from view_kib_a where $Kondisix and (alamat_b='' or alamat_b='00')";	 	$s4qry = " select $SelectKondisi1 from v_hapus_kiba where $Kondisix1 and (alamat_b='' or alamat_b='00')";					}		if ($fmBIDANG=='03'){	 	$s1qry = " select $SelectKondisi from view_kib_c where $Kondisi ";	 	$s2qry = " select $SelectKondisi1 from v_hapus_kibc where $Kondisi1 ";	 	$s3qry = " select $SelectKondisi from view_kib_c where $Kondisix and (alamat_b='' or alamat_b='00')";	 	$s4qry = " select $SelectKondisi1 from v_hapus_kibc where $Kondisix1 and (alamat_b='' or alamat_b='00')";					}		if ($fmBIDANG=='04'){	 	$s1qry = " select $SelectKondisi from view_kib_d where $Kondisi ";	 	$s2qry = " select $SelectKondisi1 from v_hapus_kibd where $Kondisi1 ";	 	$s3qry = " select $SelectKondisi from view_kib_d where $Kondisix and (alamat_b='' or alamat_b='00')";	 	$s4qry = " select $SelectKondisi1 from v_hapus_kibd where $Kondisix1 and (alamat_b='' or alamat_b='00')";					}		if ($fmBIDANG=='06'){	 	$s1qry = " select $SelectKondisi from view_kib_f where $Kondisi ";	 	$s2qry = " select $SelectKondisi1 from v_hapus_kibf where $Kondisi1 ";	 	$s3qry = " select $SelectKondisi from view_kib_f where $Kondisix and (alamat_b='' or alamat_b='00')";	 	$s4qry = " select $SelectKondisi1 from v_hapus_kibf where $Kondisix1 and (alamat_b='' or alamat_b='00')";					} 	 	$qryx = mysql_query($s1qry);		$jmlbiharga=0;		$jmlbibarang=0;		while($datax=mysql_fetch_array($qryx)){			$jmlbiharga=$datax['tot_harga'];			$jmlbibarang=$datax['tot_barang'];		} 	 	$qryx = mysql_query($s2qry);		$jmlhapusharga=0;		$jmlhapusbarang=0;		while($datax=mysql_fetch_array($qryx)){			$jmlhapusharga=$datax['tot_harga'];			$jmlhapusbarang=$datax['tot_barang'];		}		//		if (empty($jmltharga) ) $jmltharga=0;//		if (empty($jmltbarang) ) $jmltbarang=0;//		$jmltharga=1000000;		$jmltharga=$jmlbiharga-$jmlhapusharga;		$jmltbarang=$jmlbibarang-$jmlhapusbarang;		array_push($kolomdata1, $jmltharga);		array_push($kolomdata2, $jmltbarang);		$jmlTotHarga=$jmlTotHarga+$jmltharga;		$jmlTotBarang = $jmlTotBarang+$jmltbarang;		if ($COrder=="00"){		if ($jmltharga>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					} else {		if ($jmltbarang>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					}		//		$cari->cek .=$data['nm_skpd'].' = '.$jmltharga.' '.$s1qry.' - '.$cc.'<br>';			}			$JmlTotData=$JmlTotData+1;		array_push($kolomtitle1, 'Kota / Kabupaten Lainnya');		$cb++;		array_push($kolomlabelno, $cb.'.'); 	 	$qryx = mysql_query($s3qry);		$jmlbiharga=0;		$jmlbibarang=0;		while($datax=mysql_fetch_array($qryx)){			$jmlbiharga=$datax['tot_harga'];			$jmlbibarang=$datax['tot_barang'];		} 	 	$qryx = mysql_query($s4qry);		$jmlhapusharga=0;		$jmlhapusbarang=0;		while($datax=mysql_fetch_array($qryx)){			$jmlhapusharga=$datax['tot_harga'];			$jmlhapusbarang=$datax['tot_barang'];		}				$jmltharga=$jmlbiharga-$jmlhapusharga;		$jmltbarang=$jmlbibarang-$jmlhapusbarang;		array_push($kolomdata1, $jmltharga);		array_push($kolomdata2, $jmltbarang);//		array_push($kolomdata1, 1000000);//		array_push($kolomdata2, 100);		$jmlTotHarga=$jmlTotHarga+$jmltharga;		$jmlTotBarang = $jmlTotBarang+$jmltbarang;		if ($COrder=="00"){		if ($jmltharga>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					} else {		if ($jmltbarang>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					}		/*		$jmltharga=0;		$jmltbarang=0;		if ($fmBIDANG=='01'){	 	$s1qry = " select $SelectKondisi from view_kib_a where $Kondisix and (alamat_b='00' or alamat_b='') and  f='".$fmBIDANG."'";	 	$s2qry = " select $SelectKondisi1 from v_hapus_kiba where $Kondisix1 and (alamat_b='00' or alamat_b='') and  f='".$fmBIDANG."'";*/					}		 }	if ($COrder=='02' || $COrder=='03'){ $Kondisi =" a1='11' and status_barang<>3 ";  if ($fmSKPD!='00') { 	$Kondisi .= " and c=".$fmSKPD; } if ($fmUNIT!='00') { 	$Kondisi .= " and d=".$fmUNIT; }if ($fmSUBUNIT!='00') { 	$Kondisi .= " and e=".$fmSUBUNIT; }  $sqry="select sum(jml_barang) as jml_barang,sum(jml_harga) as jml_harga from buku_induk". " where ".$Kondisi. " group by a1 order by a1";$QryBarang = mysql_fetch_array(mysql_query($sqry));$jmlTotBarang = $QryBarang['jml_barang'];$jmlTotHarga = $QryBarang['jml_harga']; if ($jmlTotHarga>0) {$ada_data=1;} else {$ada_data=0;}if ($ada_data==1){$sqry = "select * from ref_barang where g='00' order by f";$qry = mysql_query($sqry);$jmlData= mysql_num_rows($qry);$JmlTotData =$jmlData;$cb=0;$jmlTotHarga=0;$jmlTotBarang = 0;	while($data=mysql_fetch_array($qry)){		array_push($kolomtitle3, $data['f'].".00.00");		array_push($kolomtitle1, $data['nm_barang']);		$cb++;		array_push($kolomlabelno, $cb.'.');								$jmltharga=0;		$jmltbarang=0;		$s1qry="select f,sum(jml_barang) as tot_barang,sum(jml_harga) as tot_harga from buku_induk".		" where ".$Kondisi." and f=".$data['f'].		" group by f order by f";  	 	$qryx = mysql_query($s1qry);		$cc=0;		while($datax=mysql_fetch_array($qryx)){			if ($cc==0) {			$jmltharga=$jmltharga+$datax['tot_harga'];			$jmltbarang=$jmltbarang+$datax['tot_barang'];			}			$cc++;		}//		if (empty($jmltharga) ) $jmltharga=0;//		if (empty($jmltbarang) ) $jmltbarang=0;//		$jmltharga=1000000;		array_push($kolomdata1, $jmltharga);		array_push($kolomdata2, $jmltbarang);		$jmlTotHarga=$jmlTotHarga+$jmltharga;		$jmlTotBarang = $jmlTotBarang+$jmltbarang;		if ($COrder=="02"){		if ($jmltharga>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					} else {		if ($jmltbarang>0) {array_push($kolomlabel2, "%.2f%%");} else {array_push($kolomlabel2, "");}					}		//		$cari->cek .=$data['nm_skpd'].' = '.$jmltharga.' '.$s1qry.' - '.$cc.'<br>';			}	 }}}function makepiechart1(){global $kolomdata1,$kolomdata2,$kolomdata3,$kolomdatap1,$kolomdatap2;	global $kolomlabel1,$kolomlabel2,$kolomlabel3;		global $kolomtitle1,$kolomtitle2,$kolomtitle3;global $fmBIDANG;global $fmWIL,$fmSKPD,$fmUNIT,$fmSUBUNIT,$fmKEPEMILIKAN,$fmWIL;global $KEPEMILIKAN,$WILAYAH,$SKPD,$UNIT,$SUBUNIT;  		global $cari,$datawarna;global $ada_data,$COrder;$tmpdir='tmp2011/';$filename='';$filenamex=gentmpfile($tmpdir,'png');// $ada_data=1;$filename=$tmpdir.$filenamex;require_once ('lib/jpgraph/jpgraph.php');require_once ('lib/jpgraph/jpgraph_mgraph.php');require_once ('lib/jpgraph/jpgraph_canvas.php');require_once ('lib/jpgraph/jpgraph_table.php');$mgraph = new MGraph();if ($ada_data==1){	require_once ('lib/jpgraph/jpgraph_pie.php');require_once ('lib/jpgraph/jpgraph_pie3d.php');			$jmldata=count($kolomdata1);			$xrow=$jmldata*25;			$graph = new PieGraph(700,600);			$graph->ClearTheme();			if ($COrder=='01' || $COrder=='03' || $COrder=='07' || $COrder=='09' || $COrder=='11'){			$TitleChart='JUMLAH BARANG';//			$p1 = new PiePlot3D($kolomdata2);			$p1 = new PiePlot($kolomdata2);							} 			if ($COrder=='00' || $COrder=='02' || $COrder=='06' || $COrder=='08' || $COrder=='10')			 {			$TitleChart='HARGA PEROLEHAN';//			$p1 = new PiePlot3D($kolomdata1);			$p1 = new PiePlot($kolomdata1);							}/*switch ($fmBIDANG){	case '00':	{		$TitleChart.=" (BUKU INVENTARIS)";		break;	}	case '01':	{		$TitleChart.=" (KIB A TANAH)";		break;	}	case '02':	{		$TitleChart.=" (KIB B PERALATAN DAN MESIN)";		break;	}	case '03':	{		$TitleChart.=" (KIB C GEDUNG DAN BANGUNAN)";		break;	}	case '04':	{		$TitleChart.=" (KIB D JALAN, IRIGASI DAN JARINGAN)";		break;	}	case '08':	{		$TitleChart.=" (KIB E ASET TETAP LAINNYA)";		break;	}	case '09':	{		$TitleChart.=" (KIB F KONTRUKSI DALAM PENGERJAAN)";		break;	}	} */			$graph->SetFrame(false);						//			$graph->title->Set($TitleChart);//			$graph->title->SetFont(FF_ARIAL,FS_BOLD,12);			$p1->SetSliceColors($datawarna);			$p1->SetSize(260);			$p1->SetCenter(0.5,0.5);//			$p1->SetAngle(90);			$p1->SetLabels($kolomlabel2);			$p1->SetLabelPos(1.05);			$p1->SetLabelType(PIE_VALUE_PER);			$p1->ExplodeAll(3);				$graph->Add($p1);			$mgraph->add($graph,20,20);		}else{	$cgraph = new CanvasGraph(1000,60);	$t1 = new Text("Tidak ada data !!\nChart tidak dapat dibuat");	$t1->SetPos(0.35,0.10);	$t1->SetOrientation("h");	$t1->SetFont(FF_ARIAL,FS_BOLD,14);	$t1->SetBox("white","black",'gray');	$t1->SetColor("black");	$cgraph->AddText($t1);	$mgraph->add($cgraph,20,20);	}$mgraph->Stroke($filename);// $cari->cek .=' warna : '.$COrder;	return $filenamex;	}function makebarchart1(){global $kolomdata5,$kolomdata6,$kolomdata7,$kolomdatap1,$kolomdatap2;	global $kolomlabel1,$kolomlabel2,$kolomlabel3;		global $kolomtitle1,$kolomtitle2,$kolomtitle3;global $fmBIDANG;global $fmWIL,$fmSKPD,$fmUNIT,$fmSUBUNIT,$fmKEPEMILIKAN,$fmWIL;global $KEPEMILIKAN,$WILAYAH,$SKPD,$UNIT,$SUBUNIT;  		global $cari,$datawarna;global $ada_data,$COrder;$tmpdir='tmp2011/';$filename='';$filenamex=gentmpfile($tmpdir,'png');// $ada_data=1;$filename=$tmpdir.$filenamex;require_once ('lib/jpgraph/jpgraph.php');require_once ('lib/jpgraph/jpgraph_bar.php');$graph = new Graph(950,600);    $graph->ClearTheme();$graph->SetFrame(false);// $graph->$graph->SetScale("textlin");// $graph->SetShadow();$graph->img->SetMargin(120,30,60,60);$graph->xaxis->SetTickLabels($kolomtitle1);$graph->yaxis->scale->SetGrace(2);// $graph->yaxis->setpos('min');$graph->xgrid->Show();$graph->yaxis->SetLabelFormatCallback('separator1000');$graph->xaxis->title->Set('Tahun');$graph->xaxis->title->SetFont(FF_ARIAL,FS_BOLD);if ($COrder=='05'){$graph->yaxis->title->Set('Jumlah Barang');// $graph->title->Set('JUMLAH BARANG PERTAHUN');	} else {$graph->yaxis->title->Set('Nilai Asset (Dalam Ribuan)');// $graph->title->Set('PEROLEHAN PERTAHUN');	}$graph->yaxis->title->SetFont(FF_ARIAL,FS_BOLD);$graph->yaxis->SetTitleMargin(90);$graph->title->SetFont(FF_ARIAL,FS_BOLD);$bplot1 = new BarPlot($kolomdata5);$bplot2 = new BarPlot($kolomdata6);$bplot3 = new BarPlot($kolomdata7); $bplot1->SetFillColor($datawarna[3]);$bplot2->SetFillColor($datawarna[1]);$bplot3->SetFillColor($datawarna[4]); $bplot1->value->Show();$bplot1->value->SetFont(FF_ARIAL,FS_BOLD,8);$bplot1->value->SetFormat('%d');$bplot2->value->Show();$bplot2->value->SetFont(FF_ARIAL,FS_BOLD,8);$bplot2->value->SetFormat('%d');$bplot3->value->Show();$bplot3->value->SetFont(FF_ARIAL,FS_BOLD,8);$bplot3->value->SetFormat('%d');// $bplot1->SetValuePos('top');/*$bplot1->SetShadow();$bplot2->SetShadow();$bplot3->SetShadow();*/$bplot1->value->SetFormatCallback('separator1000'); $bplot2->value->SetFormatCallback('separator1000'); $bplot3->value->SetFormatCallback('separator1000'); $bplot1->SetLegend('Bertambah');$bplot2->SetLegend('Berkurang');$bplot3->SetLegend('Total');$gbarplot = new GroupBarPlot(array($bplot1,$bplot2,$bplot3));$gbarplot->SetWidth(0.7);	$graph->legend->SetPos(0.5,0.97,'center','bottom');$graph->legend->SetColumns(3);$graph->Add($gbarplot);$graph->Stroke($filename);return $filenamex;}function makelinechart1(){global $kolomdata5,$kolomdata6,$kolomdata7,$kolomdatap1,$kolomdatap2;	global $kolomlabel1,$kolomlabel2,$kolomlabel3;		global $kolomtitle1,$kolomtitle2,$kolomtitle3;global $fmBIDANG;global $fmWIL,$fmSKPD,$fmUNIT,$fmSUBUNIT,$fmKEPEMILIKAN,$fmWIL;global $KEPEMILIKAN,$WILAYAH,$SKPD,$UNIT,$SUBUNIT;  		global $cari,$datawarna;global $ada_data,$COrder;$tmpdir='tmp2011/';$filename='';$filenamex=gentmpfile($tmpdir,'png');// $ada_data=1;$filename=$tmpdir.$filenamex;require_once ('lib/jpgraph/jpgraph.php');require_once ('lib/jpgraph/jpgraph_line.php');$graph = new Graph(950,600);    $graph->ClearTheme();$graph->SetFrame(false);// $graph->$graph->SetScale("intlin");// $graph->SetShadow();$graph->img->SetMargin(100,30,60,60);$graph->xaxis->SetTickLabels($kolomtitle1);$graph->yaxis->scale->SetGrace(5);// $graph->yaxis->setpos('min');$graph->xgrid->Show();$graph->yaxis->SetLabelFormatCallback('separator1000');$graph->xaxis->title->Set('Tahun');$graph->xaxis->title->SetFont(FF_ARIAL,FS_BOLD);if ($COrder=='05'){$graph->yaxis->title->Set('Jumlah Asset');// $graph->title->Set('JUMLAH BARANG PERTAHUN');	} else {$graph->yaxis->title->Set('Nilai Asset (Dalam Jutaan)');// $graph->title->Set('PEROLEHAN PERTAHUN');	}$graph->yaxis->title->SetFont(FF_ARIAL,FS_BOLD);$graph->yaxis->SetTitleMargin(70);$graph->title->SetFont(FF_ARIAL,FS_BOLD);$bplot1 = new LinePlot($kolomdata7);/*$lineplot=new LinePlot($ydata);$lineplot->SetColor( 'blue' );$lineplot->SetWeight( 2 );   // Two pixel wide$lineplot->mark->SetType(MARK_UTRIANGLE);$lineplot->mark->SetColor('blue');$lineplot->mark->SetFillColor('red');*/$bplot1->SetColor( 'red' );$bplot1->SetWeight( 2 );   // Two pixel wide$bplot1->mark->SetType(MARK_IMG_MBALL,'red');$bplot1->mark->SetColor('blue');$bplot1->mark->SetFillColor('red');//$bplot2 = new BarPlot($kolomdata2);//$bplot3 = new BarPlot($kolomdata3); //$bplot1->SetFillColor($datawarna[3]);//$bplot2->SetFillColor($datawarna[1]);//$bplot3->SetFillColor($datawarna[4]); $bplot1->value->Show();$bplot1->value->SetFont(FF_ARIAL,FS_BOLD,8);$bplot1->value->SetFormat('%d');/*$bplot2->value->Show();$bplot2->value->SetFont(FF_ARIAL,FS_BOLD,8);$bplot2->value->SetFormat('%d');$bplot3->value->Show();$bplot3->value->SetFont(FF_ARIAL,FS_BOLD,8);$bplot3->value->SetFormat('%d');*/// $bplot1->SetValuePos('top');/*$bplot1->SetShadow();$bplot2->SetShadow();$bplot3->SetShadow();*/$bplot1->value->SetFormatCallback('separator1000'); /*$bplot2->value->SetFormatCallback('separator1000'); $bplot3->value->SetFormatCallback('separator1000'); *//*$bplot1->SetLegend('Bertambah');$bplot2->SetLegend('Berkurang');$bplot3->SetLegend('Total');*//*$gbarplot = new GroupBarPlot(array($bplot1,$bplot2,$bplot3));$gbarplot->SetWidth(0.7);	$graph->legend->SetPos(0.5,0.97,'center','bottom');$graph->legend->SetColumns(3);$graph->Add($gbarplot);*/$graph->Add($bplot1);$graph->Stroke($filename);return $filenamex;}function makedataxml1(){global $kolomdata1,$kolomdata2,$kolomdata3,$kolomdatap1,$kolomdatap2;	global $kolomlabel1,$kolomlabel2,$kolomlabel3;		global $kolomtitle1,$kolomtitle2,$kolomtitle3;global $fmBIDANG;		global $cari,$datawarna;global $ada_data,$COrder;$tmpdir='tmp2011/';$filename='';/*$filename=$tmpdir.gentmpfile($tmpdir,'xml');$tmpfname=$filename;$jmldata = count($kolomdata1);	$strXML = "<chart palette='4' caption='Rekapitulasi Buku Inventaris Barang'  pieYscale='55' pieRadius ='100' showValues='0' enableSmartLabels='0' showPercentageInLabel='0' showLabels='0'>";for ($i=1;$i<=$jmldata;$i++){		$strXML .= "<set label='".$kolomtitle1[$i]."' value='". $kolomdata1[$i]."' enableSmartLabels='0'/>";}	$strXML .= '</chart>';$handle = fopen($tmpfname, "w+");fwrite($handle, $strXML);*/$filename=$tmpdir.'test.xml';return $filename;}?>