<?phpfunction Gbr_HapusById($id){global $Main;	if ($Main->PATH_IMAGES!='')	{		$pathgbr=$Main->PATH_IMAGES;		} else {		$pathgbr='gambar2011';		}		 	$sqry = "select * from gambar where Id='$id'"; //echo "<br>sqry=$sqry";	$Qry = mysql_query($sqry); 	if($isi = mysql_fetch_array($Qry)){	//echo "<br>nmfile=".$isi['nmfile'];			if ($isi['nmfile'] != ''){	unlink($pathgbr.'/'.$isi['nmfile']); }		}		$Del = mysql_query("delete from gambar where Id='$id' limit 1");	return $Del;}function Gbr_HapusByIdBI($idbi){	 	$sqry = "select * from gambar where idbi='$idbi'"; //echo "<br>sqry=$sqry";	$Qry = mysql_query($sqry); 	if($isi = mysql_fetch_array($Qry)){	//echo "<br>nmfile=".$isi['nmfile'];			//if ($isi['nmfile'] != ''){	unlink('gambar2011/'.$isi['nmfile']); }		$Del = Gbr_HapusById($isi['Id']);		}		//$Del = mysql_query("delete from gambar where idbi='$idbi' limit 1");	return $Del;}function Gbr_SetDefault($id){	$errmsg = '';	$idbi= table_get_value("select idbi from gambar where Id='$id'", "idbi");	$sqry = "update gambar set stat=0 where idbi = '$idbi'";	mysql_query($sqry) ;		$sqry = "update gambar set stat=1 where Id = '$id'";	if (mysql_query($sqry) ){					//update buku_induk		$nmfile = table_get_value("select nmfile from gambar where id = '$id'",'nmfile');		mysql_query("update buku_induk set gambar='$nmfile' where id= '$idbi'");			//echo "<script>alert('Sukses disimpan')</script>";	}else{		$errmsg =  "<script>alert('Gagal disimpan!')</script>";	}		return $errmsg;}function Gbr_Insert( $idBI, $nmNewFile, $nmFileAsli, $fmKET){	global $HTTP_COOKIE_VARS;		//get uid -------------	$uid= $HTTP_COOKIE_VARS['coID'];				//insert -------------					$sqry = " insert into gambar (idbi, nmfile, nmfile_asli, ket, uid, tgl_update) 			value('$idBI', '$nmNewFile', '$nmFileAsli','$fmKET', '$uid', now())" ;	 		//echo "<br>sqry=$sqry";		$Ins = mysql_query($sqry);		if( table_get_value("select count(id) as cnt from gambar where idbi = '$idBI'",'cnt') ==1){		$idbrg = table_get_value(" select Id from gambar where idbi = '$idBI'","Id");		$err = Gbr_SetDefault( $idbrg );		if($err != '')	{			echo $err;		}			}		return $Ins;}/*Gbr_Proses2( $idbigambar ){	Gbr_Proses($idbigambar,$_POST[$FormName.'_fmKET'], $_POST[$FormName.'_idgbr'] ,		$_POST[$FormName.'_fmKET2'], $FormName, $_POST[$FormName.'_LimitAw']);		}*/function Gbr_Proses($idBI, $fmKET, $idgbr, $fmKET2, $FormName="FmEntryGbr", $LimitAw			){		global $Act, $errmsg, $cidBI;		global $nmNewFile, $nmFileAsli; //global return dari uploadfile2;	global $Main;	if ($Main->PATH_IMAGES!='')	{		$pathgbr=$Main->PATH_IMAGES;		} else {		$pathgbr='gambar2011';		}			$idawal = table_get_value("select idawal from buku_induk where id='$idBI'", 'idawal');	$idBI = $idawal =='' || $idawal ==0 ? $idBI: $idawal; 		//$FmEntryGbr_fmKET = $_POST['FmEntryGbr_fmKET'];	//echo"<br>Act=$Act";	//echo"<br>idgbr=$idgbr";	//echo"<br>fmKET2=$fmKET2";	switch($Act){			case $FormName.'1':{//upload				//$errmsg = uploadfile($idBI.'_','dokum');//echo "<br>errmsg=$errmsg";			$ext= strtolower( pathinfo($_FILES[ $FormName.'_uploadedfile' ]['name'],PATHINFO_EXTENSION)	 );	//echo "<br>ext=$ext";			if ( ($ext != "jpg") && ($ext != "jpeg") && ($ext != "png")) {				$errmsg = //'ext='.$ext.					' Gagal! Hanya format jpg/jpeg dan png!';}			if ($errmsg == ''){					uploadfile2(  500000, $FormName.'_uploadedfile', 					$idBI.'_', $pathgbr, 					"Ukuran File Terlalu besar! Maksimum 500 Kb" );			}						//echo"<br>nmNewFile=$nmNewFile";//echo"<br>errmsg=$errmsg";//simpan ke database 			if ( $errmsg=='' ){									if (Gbr_Insert($idBI, $nmNewFile, $nmFileAsli, $fmKET) ==FALSE){					$errmsg = 'Gambar tidak dapat disimpan!';				}								if($errmsg == ''){					echo "<script>alert('Sukses upload file $nmFileAsli')</script>";					//echo '';				}else{					echo "<script>alert($errmsg)</script>";					//echo $errmsg;				}			}else{				echo "<script>alert('$errmsg')</script>";				//echo $errmsg;			}			break;		}		case $FormName.'2':{ //edit ket			$sqry = "update gambar set ket='$fmKET2' where id = '$idgbr'";			if (mysql_query($sqry) ){				echo "<script>alert('Sukses disimpan')</script>";			}else{				echo "<script>alert('Gagal disimpan!')</script>";			}			break;		}		case $FormName.'3':{ //hapus			//cek apakah gambar default			$isdef = 0;			$str = "select * from gambar where Id='$idgbr'"; //echo "qry= $str<br>";			$qry = mysql_query($str) ;			while($isi = mysql_fetch_array($qry)){				$idbi = $isi['idbi'];	//echo "<br>idbi=$idbi";							$isdef = $isi['stat']==1?1:0;	//echo "<br>stat=". $isi['stat']." isdef=$isdef";						}							if (Gbr_HapusById($idgbr) ){				//jika gambar default				if ($isdef == 1 ){					//get jml gambar setelah dihapus					$str = 					$jmlgbr= table_get_value("select count(Id) as cnt from gambar where idbi='$idbi'", 'cnt'); //echo "<br>jmlgbr=$jmlgbr";					if ($jmlgbr > 0){ //jika masih ada data gambar											//cari kandidat default, yaitu rec pada limitaw sebelumnya / data terakhir setelah dihapus						//jika jmlgbr > limitaw+1 maka kandidat default di limitaw, jika tidak = rec terakhir stelah dihapus(jmlgbr))						if($jmlgbr>$LimitAw){							$aw = $LimitAw;						}else{							$aw = $jmlgbr-1;						}						//echo "<br>LimitAw=$LimitAw aw=$aw";						//update kandidat						$idnewdef =0;						$qry = mysql_query( "select * from gambar where idbi='$idbi' limit $aw,1");						while ($isi = mysql_fetch_array($qry)){//jika ada							$idnewdef = $isi['Id']; //echo "<br>idnewdef=$idnewdef";							//set default ke rec tsb							mysql_query("update gambar set stat = 1 where Id='$idnewdef'");							//update gambar di buku_induk 							mysql_query("update buku_induk set gambar='".$isi['nmfile']."' where id='$idbi'");						}												}else{ //jika tidak ada data gambar -> set gambar di buku_induk = ''						mysql_query("update buku_induk set gambar='' where id='$idbi'");					}											}											//echo "<script>alert('Gambar telah di hapus')</script>";				}else{				//echo "<script>alert('Gagal hapus gambar!')</script>";				}							break;		}		case $FormName.'4':{ //set default				$err = Gbr_SetDefault($idgbr);					if ($err != '') {					echo $err;				}else{										echo "<script>alert('Sukses jadikan Default')</script>";						}							break;		}	}	}function createImgEntry($FormName, $sw=300, $sh='200', $sh_ket='30', $Mode=0, $LimitAw=0){			return	createScriptJS($FormName,$FormName.'_cntgambar').	"<script>		$(document).ready(			function(){				{$FormName}_refreshList();			}		);	</script>	<input type='hidden' id='{$FormName}_sw' name='{$FormName}_sw' value='$sw'>	<input type='hidden' id='{$FormName}_sh' name='{$FormName}_sh' value='$sh'>	<input type='hidden' id='{$FormName}_sh_ket' name='{$FormName}_sh_ket' value='$sh_ket'>	<input type='hidden' id='{$FormName}_mode' name='{$FormName}_mode' value='$Mode'>".	//border-color: #CCC; border-style: solid; border-width: 1;		//"<div id='{$FormName}_frame2' style='width:".($sw+18).";height:".($sh+$sh_ket+20).";display:block' >".	"<table id='{$FormName}_frame' style='width:$sw;height:".($sh+$sh_ket+20).";		position: border-collapse: separate; 		border: solid #cccccc 1px ;	background-color:white;padding:0;'>	<tr valign='top'>	<td style='padding:2'>".						//"<div id='{$FormName}_cntgambar2' width='100%' height='100%' style='display:block;'>".	"<div id='{$FormName}_cntgambar' width='100%' height='100%' >".	"<input type=hidden id='".$FormName."_LimitAw' name= '".$FormName."_LimitAw' value='$LimitAw' >".	/*	Gbr_GetList( $Kondisi,"", $FormName, $LastGbr, 				$sw, $sh, 				$sh_ket, FALSE, 				274, 200, $swbingkai,$byId ,  				$LimitAw,				$Mode			).*/	"</div>".	//"</div>".	"</td></tr></table>";	//"</div>";}function Gbr_GetList(	$Kondisi, $OrderBy, $FormName="FmEntryGbr", $LastGbr=FALSE, 	$sw=300, $sh=200, $sh_ket=30, $viewLarge=TRUE,	$sw_min=300, $sh_min=200, $sw_bingkai=36,$byId='', 	$LimitAw, $Mode=0, $BckColor= 'white'){			global $Limit, $ListData;  //out			$idawal = table_get_value("select idawal from buku_induk where id='$byId'", 'idawal');		$byId = $idawal =='' || $idawal ==0 ? $byId: $idawal; 	$Kondisi = " Where idbi='$byId' ".$Kondisi; //echo "Kondisi= $Kondisi <br>";			//const		$imgLoadSrc = "images/administrator/images/loading.gif";	$idImgLoad = $FormName.'_imgload';	$timeOut = 5000;	//$BckColor = 'black';//'#111111';	//$fontsize = $viewLarge? '11': '19.2';	switch ($Mode ){		case 1: {			$viewLarge = TRUE;			$BckColor = 'black';			$ReadOnly = FALSE;			$sw_bingkai=30;			$fontsize = '11';			$FontColorNo = 'gray';			$FixedMenu = '1';			$bckgrndmenu = '';			break;		}		case 2: {			$viewLarge = TRUE;			$BckColor = 'white';			$ReadOnly = TRUE;			$sw_bingkai=0;			$fontsize = '11';			$FontColorNo = 'white';			$FixedMenu = '';			$bckgrndmenu = ' background-color: rgba(0,0,0,0.1);';			break;		}		default:{			$viewLarge = FALSE;			$BckColor = 'black';			$ReadOnly = FALSE;			$sw_bingkai=30;			$fontsize = '19.2';			$FontColorNo = 'gray';			$FixedMenu = '1';			$bckgrndmenu = '';			break;		}	}			$jmlData = table_get_value("select count(id) as cnt from gambar $Kondisi", "cnt");	if (empty($jmlData)) {$jmlData=0;} //echo $jmlData;			//Limit -----------------------	$JmlPerHal=1;			//$LimitAw = $_POST['".$FormName."_LimitAw']; //echo "LimitAw=$LimitAw<br>";//2;	if(empty($LimitAw)) $LimitAw = 0;	if($LimitAw>$jmlData-1) $LimitAw=$jmlData-1;	if ($LastGbr){ $LimitAw = $jmlData-1; }	$Limit = " limit $LimitAw, $JmlPerHal ";	//Limit = "liomit0,2";				if ($jmlData > 0 ){			$sqry = "select * from gambar $Kondisi $Orderby $Limit";//echo"sqry=$sqry<br>";	$Qry = mysql_query($sqry);		while ($isi = mysql_fetch_array($Qry) ){		$fname = $isi['nmfile'];//"595139244.gif";// "1002464988.JPG"; 		$Ket = $isi['ket'];		$Id = $isi['Id'];				$urlstar = $isi['stat'] == 1? 'images/tumbs/star.png': 'images/tumbs/stargray.png';		$setdefaultclick = $Mode==2?'': $FormName.'_SetDefault()';		$tampilDefault="			<a style='cursor: pointer;color:yellow;position:absolute;top:10;left:5;				background-image: url($urlstar);				background-position: 0 0;    			background-repeat: no-repeat;							width: 32px;height: 32px;				' title='Set Default' onclick='$setdefaultclick'>			</a>						";		$tampilNo ="			<a style='cursor:default;color:$FontColorNo;background-color:black;position:absolute;top:".($sh-15).";left:10;' title=''>			".($LimitAw+1)."/$jmlData			</a>			";						$ListData .= "						<div id='{$FormName}_brg$Id' align='center' style='position:relative;width:".($sw+10).";display:block;float:left;'>".														"<div id='{$FormName}_ContainImg' 					style='width:".($sw+10).";height:".($sh+10).";line-height:".$sh."px;						background-color:$BckColor;						background-image: url(\"images/administrator/images/loading.gif\");						background-position: 50% 50%;    					background-repeat: no-repeat;'				>									<table width=100% height=100% style=''><tr><td style='text-align:center'>																				<img src='view_img.php?fname=$fname&sw=".($sw-5)."&sh=".($sh-0)."' alt='' 					style='visibility:hidden' onload='this.style.visibility=\"visible\";						document.getElementById(\"{$FormName}_ContainImg\").style.backgroundImage=\"\";'>																			</td></tr></table>												</div>				<div id='{$FormName}_ContainKet'  					style='position:relative;left:-$sw_bingkai;padding:0 $sw_bingkai 0 $sw_bingkai;						background-color:white;width:".($sw+10).";						min-height:$sh_ket;display:block;'>						<table style='' ><tr><td>						<span id='{$FormName}_ket".$Id."' 							style='font-family:verdana,helvetica,arial,sans-serif; font-size:$fontsize; font-weight:400;							font-style:normal;color: #3B5998;						text-align:center;display:block;white-space: pre-wrap;word-wrap: break-word; width:".($sw+10).";'>".							htmlentities($Ket).						"</span>						</td></tr></table>									</div>			</div>			";	}			}		$ListData = "				<div id='{$FormName}_ListGbr' style='position:relative;			background-color:$BckColor;width:".(($sw+10)*$JmlPerHal).";margin:auto'>							$ListData						</div> 		";		$Hidden = "		<input type=hidden id='".$FormName."_LimitAw' name= '".$FormName."_LimitAw' value='$LimitAw' >		<input type=hidden id='".$FormName."_idgbr' name='".$FormName."_idgbr' value='$Id' >		<input type=hidden id='".$FormName."_jmldata' name='".$FormName."_jmldata' value='$jmlData'>		";		//$Script = createScriptJS('FmEntryGbr');			//Form Entry upload -------------------------------	$FormUpload = "		<input type='hidden' name='".$FormName."_nmFile'  id='".$FormName."_nmFile' value='$nmFile'>		<div>	<table class ='' style='background-color:white;'>			<tr><td ><b>File Gambar</b> <span style='color:#6D84B4'>(*.jpg, *.png)</span></td></tr>		<tr><td >			<input type='file' id='".$FormName."_uploadedfile' name='".$FormName."_uploadedfile'  value='Ganti' onchange='' onclick='' style='opacity:0.9' size='40' />			</td></tr>		<tr valign='top'><td > <b>Keterangan</b> </td> </tr>		<tr><td >			<textarea name='".$FormName."_fmKET' cols='48' style='overflow-y:scroll;overflow:-moz-scrollbars-vertical;height:50'></textarea>		</td></tr>				<tr> 			<td align='right'> 							<div style='float:right'>				<input type='button' id='{$FormName}_btsimpan' name='{$FormName}_btsimpan'  value='Simpan' onclick='".$FormName."_uploadFile()'  /> 				<input type='button' id='{$FormName}_btbatal' name='{$FormName}_btbatal'  value='Batal' onclick='".$FormName."_closeEntry()'  /> 				</div>				<div style='float:right;padding:5 5 0 0'>					<img src='$imgLoadSrc' id=$idImgLoad style='visibility:hidden;display: block; vertical-align: middle; margin-left: auto;  margin-right: auto'> 									</div>			</td>					</tr>	</table>	</div>		";	$EntryKet = "		<table>			<tr valign='top'><td id='".$FormName."_EntryKet_File' ></td></tr>			<tr valign='top'><td><b>Keterangan</b></td></tr>		<tr valign='top'>						<td><textarea id='".$FormName."_fmKET2' name='".$FormName."_fmKET2' cols='48' style='overflow-y:scroll;overflow:-moz-scrollbars-vertical;height:40'></textarea></td>		</tr>		<tr ><td colspan>			<div style='float:right'>			<input type='button' id='{$FormName}_btSimpanKet' name='{$FormName}_btSimpanKet'  value='Simpan' onclick='".$FormName."_simpanEntryKet()'  /> 			<input type='button' id='{$FormName}_btBatalKet' name='{$FormName}_btBatalKet'  value='Batal' onclick='".$FormName."_closeEntryKet()'  /> 			</div>					</td></tr>	</table>		";			//menu ---------------------	$MenuZoom = $viewLarge? "		<li style='width: 16px;height: 18px;padding:1;margin:1;background-color:black;'>			<a class='gbr_btzoom' style=''  title='Perbesar' onclick='".$FormName."_Zoom()'>			</a>		</li>" : "";			$Menu = $ReadOnly? 		"<div id='{$FormName}_menuv' class='menuv' 			style='position:absolute;			top:5;right:5;						left:auto;'		>		<ul>		<li style='width: 16px;height: 18px;padding:1;margin:1;background-color:black;'>			<a class='gbr_btdel' style='' title='Show/Hide' 				onclick='".$FormName."_ShowHide()'></a>		</li>				</div>		"		: "<div id='{$FormName}_menuv' class='menuv' 			style='position:absolute;			top:5;right:5;						left:auto;'		>		<ul>		<li style='width: 16px;height: 18px;padding:1;margin:1;background-color:black;'>			<a class='gbr_btadd' style='' title='Tambah' onclick='".$FormName."_showEntry()'></a>			<ul id='{$FormName}_ulFormEntry' >			<li >								<div style='z-index:99;position:absolute;top:-20;right:30; width:320;'>				".  FormContainer($FormUpload)."				</div> 							</li>			</ul>		</li>		<li style='width: 16px;height: 18px;padding:1;margin:1;background-color:black;'>			<a class='gbr_btedit' style='' title='Edit' onclick='".$FormName."_showEntryKet()'>			</a>			<ul id='{$FormName}_ulEntryKet'>			<li >								<div style='z-index:99;position:absolute;top:-4;right:30; width:320;'>				".  FormContainer($EntryKet) ."				</div>											</li>			</ul>		</li>		<li style='width: 16px;height: 18px;padding:1;margin:1;background-color:black;'>			<a class='gbr_btdel' style='' title='Hapus' onclick='".$FormName."_Hapus()'></a>		</li>		$MenuZoom		</div>		";			//nav	$ListData ="		$Script				$Hidden				<a name='$FormName' style='position:relative;top:-100;'></a>		<div id='{$FormName}_contain' 			style='top:0;position:relative;			background-color:$BckColor;			width:".((($sw+10)*$JmlPerHal)+($sw_bingkai*2)).";height:".($sh+10).";' 		>			<div id='{$FormName}_overlay' style='visibility:hidden;z-index:5;top:0;				position:absolute;				background-color:rgba(0,0,0,0.5);width:".((($sw+10)*$JmlPerHal)+($sw_bingkai*2)).";height:".($sh+10).";' 			></div>						$ListData			<!--<a class='gbr_btprev' style='' title='Sebelumnya' onclick='".$FormName."_Prev()'></a>			<a class='gbr_btnext' style='' title='Selanjutnya' onclick='".$FormName."_Next()'>			</a>				$Menu-->			<div id='{$FormName}_coverimg' 				style='display:none;					z-index:3;position:relative;					background-color: white;					width:".((($sw+10)*$JmlPerHal)+($sw_bingkai*2)).";					height:".($sh+10+$sh_ket).";' 			></div>			<div id='{$FormName}_menu{$FixedMenu}' 				style='display:".($FixedMenu==''?'none':'block').";					z-index:4;position:absolute;top:0;					$bckgrndmenu					width:".((($sw+10)*$JmlPerHal)+($sw_bingkai*2)).";					height:".($sh+10/*+$sh_ket*/).";' 			>".					$tampilDefault.				$tampilNo.				"<a class='gbr_btprev' style='' title='Sebelumnya' onclick='".$FormName."_Prev()'></a>				<a class='gbr_btnext' style='' title='Selanjutnya' onclick='".$FormName."_Next()'></a>					$Menu			</div>					</div>	";		return $ListData;	}function createScriptJS($FormName='FmEntryGbr', $elContain = 'cntgambar', $elIdBI='idbi'){	$idImgLoad = $FormName.'_imgload';	$Script = "		<script language='JavaScript' type='text/javascript'>		var onajxproses = false;		function {$FormName}_uploadFile(){	//alert(document.getElementById('selFile').value);								if (document.getElementById('".$FormName."_uploadedfile').value != ''){							addCoverPage('coverpage',100);					document.getElementById('".$idImgLoad."').style.visibility= 'visible';								adminForm.enctype='multipart/form-data';									document.adminForm.Act.value='".$FormName."1';								adminForm.action='#{$FormName}';					document.adminForm.submit();														}else{				alert('File belum dipilih!');			}		}				function {$FormName}_showEntry(){//alert('tes');						//document.getElementById('{$FormName}_overlay').style.visibility='visible';			document.body.style.overflow='hidden';			addCoverPage('{$FormName}_cover',1);			document.getElementById('{$FormName}_ulFormEntry').style.visibility='visible';		}		function {$FormName}_closeEntry(){						//document.getElementById('{$FormName}_overlay').style.visibility='hidden';			delElem('{$FormName}_cover');					document.body.style.overflow='auto';						document.getElementById('{$FormName}_ulFormEntry').style.visibility='hidden';		}		function {$FormName}_showEntryKet(){						var errmsg = '';				if ( document.getElementById('".$FormName."_idgbr' ) == null ) {				errmsg='Gambar tidak ada!';			}					if(errmsg ==''){								var id = document.getElementById('".$FormName."_idgbr').value;				var ket = document.getElementById('".$FormName."_ket'+id).innerHTML;								document.getElementById('{$FormName}_fmKET2').value = Encoder.htmlDecode(ket);				//document.getElementById('{$FormName}_overlay').style.visibility='visible';				document.body.style.overflow='hidden';				addCoverPage('{$FormName}_cover',1);				document.getElementById('{$FormName}_ulEntryKet').style.visibility='visible';							}else{				alert(errmsg);			}					}		function {$FormName}_simpanEntryKet(){						addCoverPage('coverpage',100);						adminForm.action='#{$FormName}'	;			document.adminForm.Act.value='".$FormName."2';			document.adminForm.submit();		}		function {$FormName}_closeEntryKet(){						//document.getElementById('{$FormName}_overlay').style.visibility='hidden';			delElem('{$FormName}_cover');					document.body.style.overflow='auto';			document.getElementById('{$FormName}_ulEntryKet').style.visibility='hidden';		}		function {$FormName}_Hapus(){			if (document.getElementById('".$FormName."_idgbr') == null) {				alert('Gambar Tidak Ada!');			}else{													if(confirm('Yakin photo ini akan di hapus?')){					adminForm.action='#{$FormName}'	;				document.adminForm.Act.value='".$FormName."3';				document.adminForm.submit();			}			}		}		function {$FormName}_SetDefault(){			if(confirm('Jadikan photo sebagai Default?')){					adminForm.action='#{$FormName}'	;				document.adminForm.Act.value='".$FormName."4';				document.adminForm.submit();			}		}		function {$FormName}_ShowHide(){			var div_ket = document.getElementById('{$FormName}_ContainKet');			//alert(div_ket.style.height);			var div = document.getElementById('{$FormName}_coverimg');			var frame = document.getElementById('{$FormName}_frame');			//alert(frame.style);			if (div.style.display == 'none'){				div.style.display = 'block';				div_ket.style.display = 'none';				//div.style.height += div_ket.style.height; 				//frame.style.border_width = '1px';				frame.style.border = '';							}else{				div.style.display = 'none';				div_ket.style.display = 'block';								frame.style.border = '1px #cccccc solid';			}			  						}		function {$FormName}_Next(){				var jmldata = document.getElementById('".$FormName."_jmldata').value;			adminForm.enctype='multipart/form-data';					adminForm.action='#{$FormName}'	;						limitaw= document.getElementById('".$FormName."_LimitAw');//alert(limitaw.value);			limitaw.value++;						if (limitaw.value > (jmldata-1)){	limitaw.value=0;}						//alert(limitaw.value);						//adminForm.submit();	adminForm.action='';			{$FormName}_refreshList();							}		function {$FormName}_Prev(){			var jmldata = document.getElementById('".$FormName."_jmldata').value;						adminForm.enctype='multipart/form-data';			adminForm.action='#{$FormName}'	;				limitaw= document.getElementById('".$FormName."_LimitAw');				//limitaw= adminForm.LimitAw;			limitaw.value--;			if (limitaw.value < 0){	limitaw.value=jmldata-1;}						//adminForm.submit(); adminForm.action='';			{$FormName}_refreshList();			}		function {$FormName}_Zoom(){			id = document.getElementById('$elIdBI').value;			adminForm.action='pages.php?Pg=brg&SPg=02&byId='+id;			adminForm.target = '_blank'; 			adminForm.submit();				adminForm.target ='';				adminForm.action='';		}				function {$FormName}_refreshList(){							onajxproses = true;			document.getElementById('FormName').value='$FormName';			id = document.getElementById('$elIdBI').value;			AjxPost(				'pages.php?Pg=brg&SPg=02&byId='+id+'&idprs=list',				'adminForm',							function(resp){									if (resp.ErrMsg==''){						document.getElementById('$elContain').innerHTML = resp.content;						onajxproses=false;					}else{						alert(resp.ErrMsg);					}				},				true							);		}						$(document).ready(function(){													$('#$elContain').hover(				function(){					$('#{$FormName}_menu').show();				},				function(){					if (!document.getElementById('{$FormName}_cover')){						$('#{$FormName}_menu').hide();					}else{						//alert('ada');					}				}			);					});								/*		$(window).resize(			function(){				if (onajxproses==false){					document.getElementById('winw').value = getBrowserWidth();					document.getElementById('winh').value = getBrowserHeight();					//adminForm.submit();					{$FormName}_refreshList();					}			}		);*/				</script>		";			return $Script;	}function Gbr_GetList2($Kondisi, $OrderBy, $FormName='FmEntryGbr', $LastGbr=FALSE, $sw=300, $sh=200, $sh_ket=30, $viewLarge=TRUE,	$sw_min=300, $sh_min=200, $sw_bingkai=36,$byId='', $LimitAw){	/*	Kondisi hanya diisi untuk parameter selain idbi, diawali and/or*/	global $Limit, $ListData;  //out			$idawal = table_get_value("select idawal from buku_induk where id='$byId'", 'idawal');	//if($idawal !=''){	$byId= $idawal; 	}	$byId = $idawal =='' || $idawal ==0 ? $byId: $idawal; 	//echo "byId= $byId <br>";		$Kondisi = " Where idbi=$byId ".$Kondisi; //echo "Kondisi= $Kondisi <br>";		Gbr_GetList($Kondisi, $OrderBy, $FormName, $LastGbr, $sw, $sh, $sh_ket, $viewLarge,		$sw_min, $sh_min, $sw_bingkai,$byId, $LimitAw);	//echo "limit=$Limit<br>";	}?>