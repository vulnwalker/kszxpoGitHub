<? error_reporting(0);$nm=$_GET['nm'];$dr=$_GET['dr'];$dir=$dr;//"/path/to/file/";if (isset($_REQUEST["file"])) {	   $file = $_REQUEST["file"];				//$fname="../../../../tes/tes.dat"; //yikes!	$replace=""; //what you want to replace the bad characters with	$pattern="/([[:alnum:]_\.-]*)/"; //basically all the filename-safe characters	$bad_chars=preg_replace($pattern,$replace,$file); //leaves only the "bad" characters	$bad_arr=str_split($bad_chars); //split them up into an array for the str_replace() func.	$file=str_replace($bad_arr,$replace,$file); //replace all instances of the bad chars with the replacement	//echo $fname; //just echo the name for your satisfaction				$bad_chars=preg_replace($pattern,$replace,$dir); //leaves only the "bad" characters	$bad_arr=str_split($bad_chars); //split them up into an array for the str_replace() func.	$dir=str_replace($bad_arr,$replace,$dir); //replace all instances of the bad chars with the replacement			$file=$dir."2011/".$file;		    //header("Content-type: application/force-download");    header("Content-Transfer-Encoding: Binary");    header("Content-length: ".filesize($file));	header("Content-type: octet/stream");    //header("Content-disposition: attachment; filename=".basename($file)."");	header("Content-disposition: attachment; filename=$nm");	    readfile("$file");	} else {    echo "No file selected";} ?>